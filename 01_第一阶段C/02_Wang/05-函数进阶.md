# 第六章 函数进阶

所谓的函数，就是指程序完成功能的一个局部步骤

函数就是对步骤的一种封装形式,在其它编程语言中又称子程序、方法、过程



三个方面学习：

1. 函数定义：实现函数功能
2. 函数调用：使用函数的功能
3. 函数声明：为了协助编译器检查函数调用的正确性



无参无返回值类型的函数：

1. 定义：

   void    FunctionName()  //函数头

   {//函数体

   ?	......

   }

2. 调用：

   FunctionName();

3. 声明：函数头;



无参无返回值类型函数调用的全过程:

1. 跳转进函数体开始执行函数体中第一条语句
2. 执行函数体中后续语句
3. 直到执行到函数体最后一条语句   或者   执行到`return;`语句再跳转回调用处

## 第一节 基本类型作为函数形参类型

最初的三个程序让我们初步认识了一下函数定义，这里更进一步。
之前函数定义的函数头形参列表是空的，这些函数调用时只需函数名和空()一对：函数名()。
意味着调用一次这样的函数你无须准备任何前提条件，再看一下函数定义的完整语法形式：

形参：形式参数：

1. 其本质是定义在函数头上的变量
2. 特殊作用：函数调用时用来接收实参表达式的值
3. 不可以初始化
4. 在形式上告诉使用者（函数调用者），使用该功能需要提供的已知条件（已知数据）

  

```c
Type FunctionName(形参1类型 形参1名字,形参2类型 形参2名字,...,形参n类型 形参n名字)
{
    //...
}
```



```c
double GetArea(double l,double w)
{
	l++;
	w--;	
	return l * w;
}
int main()
{
    ....
	double a = 3.4;
	double b = 5.6;
	s = GetArea(a,b);
    GetArea(a,b);
	....
}
```

函数头圆括号()里的形参列表中可以有0个或多个形参，多个形参用逗号,分隔，
每个形参和之前定义的变量一样都有数据类型和名字，因此形参也被称为**参量**，可以认为形式参数就是定义在函数头的变量，所不同的是：
1. 定义在函数头
2. 形参不可以初始化
3. 形参有个特别作用：在函数调用时，形参将被赋值为实参表达式的值，然后才开始执行函数体中的语句

当一个函数定义形参个数不是0时，调用一次这样函数之前，要事先准备好一些数据，
并将这些数据赋值给对应形参，然后这个函数才能正确完成它的功能，如果数据不符合函数定义的要求，调用的结果当然也是不正确的。
因此我们调用任何函数之前都首先要弄清楚这个函数需要我们准备哪些数据、这些数据是什么含义、符合什么样的要求。
而从函数实现者的角度出发，你应该要考虑调用者需要给你哪些数据你才能实现这个功能，不能多也不能少，
然后再考虑这些数据应该是什么类型，给它们起好名字，你的函数头差不多就定型了。

再看一下函数调用的详细语法形式：`FunctionName(实参表达式1,实参表达式2,...,实参表达式n)`

调用时，实参表达式的个数与函数定义处形参的个数一致，并且按位置一一对应，这些实参本质是表达式的值，也就是一些数字，
因此实参也被称为**参数**

#### 再复习一下每次函数调用的全过程：

1. 调用函数的地方先暂停执行后续步骤
2. 向函数传递数据（即传参：把实参表达式赋值给形参）
3. 跳转至函数体第一条语句处
4. 按步执行函数体中的语句
5. 函数执行结束后跳转回调用子程序的地方（可能伴随其它附加作用：如携带返回值）
6. 调用子程序的地方继续执行后续步骤

其中第二步如何进行的呢？请记住如下步骤（背诵、至死不忘）：
1. **挨个执行形参定义语句**
2. **将实参表达式的值赋值给相应形参**
   C语言任何类型作为形参类型都是如此进行传参的，
   第1小步告诉我们形参列表就是形参定义语句列表，**形参也是变量**，形参定义语句和变量定义语句的基本作用是一样的，只是在用途、定义位置、初始化上有些区别；
   第2小步告诉我们**实参是表达式**，它的个数以及每个表达式的类型与函数定义的形参列表一一对应，不能多也不能少。

**当一个形参的类型是基本数据类型时:**

1. **只能单向传递指定类型的数值：函数调用者向函数实现者传递一个对应类型的数值**
2. **函数实现者只是想通过这个形参得到一个对应类型的数值而已，该数值是完成功能的必要条件之一。**
3. **函数调用者使用函数功能前则需准备好这个数值（一个实参表达式）**

学习C语言编程一定得多多编写不同功能的函数，在今后的练习中没有特别交待，程序都应该是多函数形式的！！！

## 第二节 基本类型作为函数返回值类型
之前我们只关注了形参类型，下面聊聊函数返回值类型，函数根据返回值类型可以分为：
- 无返回值类型函数，即返回值类型是void的函数，这样的函数定义语法形式如下：

void FunctionName(形参1类型 形参1名字,形参2类型 形参2名字,...,形参n类型 形参n名字) //n >= 0
{
    //...
}


这样的函数调用，只能组合成独立的函数调用语句：
FunctionName(实参表达式1,实参表达式2,...,实参表达式n);


- 有返回值类型函数，即返回值类型是非void的函数，这样的函数定义语法形式如下：
  Type FunctionName(形参1类型 形参1名字,形参2类型 形参2名字,...,形参n类型 形参n名字) //n >= 0 Type不为void
  {
    //...
  }
  这样的函数调用，可能有两种形式，

  - 第一种是**忽略函数返回值**，只能组合成独立的函数调用语句：`FunctionName(实参表达式1,实参表达式2,...,实参表达式n);`这种形式的调用前提是本次调用的返回值与程序后续处理无关，比如我们对printf的调用。
  - 第二种则是一种优先级最高的运算符，每个实参就是一个操作数，而运算结果就是函数返回值，这个运算符写法如下：
    FunctionName(实参1,实参2,...,实参n)

该函数有几个形参这个运算符就是几目运算符，整个表达式的值就是本次调用的函数返回值，
因此由它构成的表达式可以作为子表达式参与其它表达式的计算中去，如：
x = FunctionName(实参1,实参2,...,实参n);

FuncOther(FunctionName(实参1,实参2,...,实参n),10);

x = y + 3 * FunctionName(实参1,实参2,...,实参n);

if(FunctionName(实参1,实参2,...,实参n))
{
    //...
}
...等等所有表达式可以出现的地方。

**基本类型作为函数返回值类型意味着本次函数调用的返回值是一个对应类型的数值**。

## 第三节 return语句
函数实现中，怎么表示函数返回呢？
对于返回值类型为void的函数可以有两种方式：
1. 自然运行到函数体最后一条语句，意味着可以没有return语句
2. 遇到return语句，此时的return语句写法：return; 
    如果return语句不是最后一条语句，而是位于中间位置，则函数就执行到此处停止，跳回到调用处，
    return语句的后续语句本次调用将不再执行

而对于返回值类型为非void的函数，函数体中则必须有一条甚至多条return语句，
每条return语句写法：return 返回值类型同类型的表达式; 
一样，本次调用一旦执行到任何一条return语句则本次调用就告结束，跳转回调用处。

大家要注意的是：如果return后表达式的值类型与函数返回值类型不一致，也将发生类似赋值的自动类型转换。

再次强调C语言编程的第一大原则：类型一致化，主要体现在三个方面：
1. 赋值表达式
2. 函数传参时，实参表达式赋值给形参
3. 函数返回时，return后表达式的值类型与函数返回值类型

任何哪一个方面发生不一致，程序员都需要认真检查，自行确保自动类型转换引起数值变化是符合你的程序需求的！

## 第四节 单个字符的输入和输出
以下两个函数的声明请：#include <stdio.h>

### 4.1 向命令行界面输出一个字符――putchar
函数原型：int putchar(int c)
函数功能：该函数将指定ASCII值的字符显示在命令行界面上
函数返回值：该字符ASCII值或-1表示出错，对命令行界面而言该返回值可忽略，因为这个函数几乎不会出错
该函数功能可以等价地用printf来实现，但其更简洁。

例如：
char ch = 'K';
putchar(ch);//将ch中存储的字符输出在命令行界面  <===> printf("%c",ch);
putchar('H');//将字符'H'输出在命令行界面 <===> printf("%c",'H');

### 4.2 从用户在命令行界面的输入中获取一个字符――getchar
函数原型：int getchar()
函数功能：该函数每被调用一次只从用户在命令行界面的输入中获取一个字符，用户没有输入时等候用户输入直到输入结束
返回值：返回获取的那个字符的ASCII值
该函数功能可以等价地用scanf来实现，但其更简洁。
char ch1 = '\0';
char ch2 = '\0';

ch1 = getchar();// <====>scanf("%c",&ch1);
//getchar();
ch2 = getchar();// <====>scanf("%c",&ch2);

/*
如果用户输入：a回车
则ch1将被赋值为字符a，ch2将被赋值为换行符'\n'
如果不想ch2为'\n',可以在两个getchar中间再插入一句忽略返回值的getchar();调用语句
*/

### 4.3 补充说明printf和scanf函数返回值含义
printf函数调用一次返回本次输出在命令行界面上的字符个数。程序逻辑几乎用不到这个返回值，因此可忽略。
scanf函数调用一次返回本次成功获取并赋值成功的数据个数。适当时候可以运用来判断用户输入是否正确。

课堂练习1：从键盘输入三个浮点数，按从大到小输出。
	main
    Ouput
    InputFloat



课堂练习2：判断输入的整数的第29位是0还是1
    main
	InputInt
	IsOneAt29



课堂练习3：判断用户输入的一个字符是否是数字字符

?	main

?	IsNumber

?    InputChar

















