# ***基础阶段

主要掌握C语言的基本语法，代码习惯等等。。。

## 一、输入输出  

### 1、测试-printf

主要测试输出不同类型的数据

```c
//测试打印  各种类型数据

#include <stdio.h>

int main()
{
	int i = 123;
	long l = 456;
	unsigned int u = 19;

	float f = 2.34f;
	double d = 9.76;
	char c = 'K';

	printf("i=%d,l=%ld,u=%u(u=%o,u=%x),f=%f,d=%f,c=%c,str=%s \n",i,l,u,u,u,f,d,c,"qwert");//八进制，十六进制可以%#o，%#x 格式化输出

	printf("i=%6d\n",i);
	printf("i=%-6d\n",i);//左对齐占六个字符

	printf("d=%10.1f\n",d);
	printf("d=%-10.1f\n",d);

	printf("Address of f is %p\n",&f);
	return 0;
}
```

### 2、测试-scanf

```c
测试scanf函数
#include <stdio.h>

int main()
{
	int x = 0;
	char c = '\0';

	printf("Please input a number:\n");

	scanf("%4d",&x);

	printf("x=%d\n",x);	

	printf("Please input a char:\n");

	scanf("%c",&c);//将第一次输入后的回车‘\n'清除
    
	scanf("%c",&c);

	printf("c=%c\n",c);
	return 0;
}

```

### 3、MF_scanf_printf

```c
MF 测试scanf函数
#include <stdio.h>

char input_char();
int input_number();

int main()
{
	/*输入一个整型数*/
	int n = input_number();

	/*输入一个第一个字符*/
	char c1 = input_char();

	/*输入第二个字符*/
	char c2 = input_char();

	/*打印数和两个字符*/
	printf("n = %d,c1=%c,c2=%c\n",n,c1,c2);
	return 0;
}

int input_number()
{
	int x = 0;

	printf("Please input a number:\n");
	scanf("%d",&x);

	{//清空本轮输入多余的字符	
		while(getchar() != '\n')
		{
		}
	}
	return x;
}

char input_char()
{
	char ch= 0;

	printf("Please input a char:\n");
	scanf("%c",&ch);

	while(getchar() != '\n')
	{
	}

	return ch;
}
```



## 二、sizeof（）

### 1、测试sizeof（）

注意sizeof（）在编译阶段完成！

```c
测试sizeof（）；
#include <stdio.h>

int main()
{
	int x = 21;
	int y = 0;

	y=sizeof(x++);//sizeof()在编译阶段完成，所以x++不执行；

	printf("x=%d,y=%d\n",x,y);
	return 0;
}

```

## 三、随机数_rand（）

### 1、srand（）

**获得种子：**

​       通常是系统时间，所以需要头文件：```  #include <stdio.h>```

只需要在’main‘函数中调用一次即可

```c
srand（time（NULL）；//获得种子
```



### 2、rand（）

**获得随机数：**

​		需要头文件`` #include <stdio.h> ``

​		获得的随机数值很大：根据自己的需要进行求余即可。

```  c
num = rand()%100;   //获得一百以内的随机数；
```



### 3、获得一个随机数

```c
//实现 随机数
#include <stdio.h>
#include <stdlib.h>

#include <time.h>

int main()
{
	int n1 = 0;
	int n2 = 0;

	srand(time(NULL));//获得种子

	n1 = rand();// 获得随机数
	n2 = rand();

	printf("n1=%d,n2=%d\n",n1,n2);
	return 0;
}

```



## 四、if-else语句

### 1、椭圆计算

```c
#include <stdio.h>
#define PI 3.14
int main()
{
	float lr = 0.0f;
	float sr = 0.0f;
	float area = 0.0f;
	float rl = 0.0f;

	printf("Please input long-r of ellipse:\n");
	scanf("%f",&lr);

	printf("Please input short-r of ellipse:\n");
	scanf("%f",&sr);

	if(lr <= 0 || sr <= 0)//判断输入数据合理性
	{
		printf("Your input is invalid\n");
		return 1;
	}

	area = PI * lr *sr;//面积

	if(lr < sr)   //判断长边短边，输入相反则交换
	{
		float t = 0.0f;

		t = lr;
		lr = sr;
		sr = t;
	}

	rl =2 * PI * sr + 4 * (lr - sr);//周长

	printf("The area of ellipse is %.2f\n",area);
	printf("The round-len of ellipse is %.2f\n",rl);
	return 0;
}
```

### 2、MF_椭圆计算

```c
MF 计算椭圆

#include <stdio.h>

#define PI 3.14

float input_sr();
float input_lr();
float get_ellipse_area(float l1,float l2);
float get_ellipse_rl(float l1,float l2);
int main()
{
	float r1 = input_lr();
	float r2 = input_sr();

	if(lr <= 0 || sr <= 0)
	{
		printf("Your input is invalid\n");
		return 1;
	}

	printf("The area of ellipse is %.2f\n",get_ellipse_area(r1,r2));
	printf("The round-len of ellipse is %.2f\n",get_ellipse_rl(r1,r2));
	return 0;
}

float get_ellipse_area(float l1,float l2)
{
	return PI * l1 * l2;
}

float get_ellipse_rl(float l1,float l2)//判断长短轴，并修正
{
	float t = 0.0f;

	if(l1 < l2)
	{
		t = l1;
		l1 = l2;
		l2 = t;
	}

	return 2 * PI * l2 + 4 * (l1 - l2);
}
float input_lr()
{
	float lr = 0.0f;
	
	printf("Please input long-r of ellipse:\n");
	scanf("%f",&lr);

	return lr;
}

float input_sr()
{
	float sr = 0.0f;
	
	printf("Please input short-r of ellipse:\n");
	scanf("%f",&sr);

	return sr;
}

```

### 3、成绩等级

```c
if- else 打印成绩
#include <stdio.h>

int main()
{
	int score = 0;
	char lv = '\0';

	printf("Please input your score:\n");
	scanf("%d",&score);

	if(score >= 90)
	{
		lv = 'A';
	}
	else if(score >= 80)
	{
		lv = 'B';
	}
	else if(score >= 70)
	{
		lv = 'C';
	}
	else if(score >= 60)
	{
		lv = 'D';
	}
	else
	{
		lv = 'E';
	}

	printf("Your score-level is %c\n",lv);
	return 0;
}

```

### 4、MF_成绩等级

```c
MF if-else打印成绩
#include <stdio.h>

char get_level(int fen);
int input_score();
int main()
{
	int score = input_score();

	char ret = get_level(score);

	printf("Your score-level is %c\n",ret);
	return 0;
}

char get_level(int fen)
{
	char lv = '\0';

	if(fen >= 90)
	{
		lv = 'A';
	}
	else if(fen >= 80)
	{
		lv = 'B';
	}
	else if(fen >= 70)
	{
		lv = 'C';
	}
	else if(fen >= 60)
	{
		lv = 'D';
	}
	else
	{
		lv = 'E';
	}

	return lv;
}

int input_score()
{
	int sc = 0;
	
	printf("Please input your score:\n");
	scanf("%d",&sc);

	return sc;
}

```

### 5、转换大小写

```c
if-else转换大小写
#include <stdio.h>

int main()
{
	char ch = '\0';

	printf("Please input a char:\n");
	scanf("%c",&ch);

	if(ch >= 'A' && ch <= 'Z')
	{
		ch = ch + ('a' - 'A');
		printf("ch=%c\n",ch);
	}
	else
	{
		printf("%c is not upper-char\n",ch);
	}
	return 0;
}

```

### 4、MF_转换大小写

```c
MF 转化大小写
#include <stdio.h>

char input_char();
char up_to_lower(char x);
int main()
{
	char c = input_char();

	printf("After change, c is %c\n",up_to_lower(c));
	return 0;
}

char up_to_lower(char x)
{
	if(x >= 'A' && x <= 'Z')
	{
		return x + ('a' - 'A');
	}
	else
	{
		return x;
	}
}

char input_char()
{
	char ch = '\0';

	printf("Please input a char:\n");
	scanf("%c",&ch);

	return ch;
}

```



## 五、switch语句

### 1、实现简单计算器

```c

Switch 实现计算器
#include <stdio.h>

int main()
{
	int num1 = 0;
	int num2 = 0;
	char op = '\0';
	int ret = 0;
	int flag = 1;

	printf("Please input the first number:\n");
	scanf("%d",&num1);
	scanf("%c",&op);

	printf("Please input the operator-char:\n");
	scanf("%c",&op);

	printf("Please input the second number:\n");
	scanf("%d",&num2);

	switch(op)
	{
		case '+':
			ret = num1 + num2;
			break;
		case '-':
			ret = num1 - num2;
			break;
		case '*':
			ret = num1 * num2;
			break;
		case '/':
			if(num2 != 0)
			{
				ret = num1 / num2;
			}
			else
			{
				flag = 0;
				printf("num2 is zero,can not operate\n");
			}
			break;
		default:
			flag = 0;
			printf("The operate is not supported\n");
			break;
	}

	if(flag)
	{
		printf("%d %c %d = %d\n",num1,op,num2,ret);
	}

	return 0;
}

```



### 2、MF_实现简单计算器

```c
MF 计算器
#include <stdio.h>

int input_op_char();
int input_number();
int calc(int n1,char which,int n2);
int main()
{
	/*
	 *输入num1 运算符符号 num2 
	 */
	int num1 = input_number();
	char op = input_op_char();
	int num2 = input_number();
	int ret = 0;


	/*根据输入op符号进行四则运算*/
	if(op == '+' || op == '-' || op == '*' || (op == '/' && num2 != 0))
	{
		ret = calc(num1,op,num2);
	}
	else
	{
		printf("Can not operate!\n");
		return 1;
	}


	/*输出运算结果*/
	printf("%d %c %d = %d\n",num1,op,num2,ret);
	return 0;
}

int calc(int n1,char which,int n2)
{
	int x = 0;
	switch(which)
	{
		case '+':
			x = n1 + n2;
			break;
		case '-':
			x = n1 - n2;
			break;
		case '*':
			x = n1 * n2;
			break;
		case '/':
			x = n1 / n2;
			break;
	}
	return x;
}

int input_number()
{
	int x = 0;
	char ch = '\0';

	printf("Please input a number:\n");
	scanf("%d",&x);

	scanf("%c",&ch);

	return x;
}

int input_op_char()
{
	char ch = '\0';

	printf("Please input a operate_char:\n");
	scanf("%c",&ch);

	return ch;
}

```



### 3、MF_计算每月天数

```c
MF 多函数
#include <stdio.h>

int input_month();
int input_year();
int is_leap_year(int y);
int get_month_days(int y,int m);
int main()
{
	/*输入年月*/
	int year = input_year();
	int month = input_month();
	int days = 0;

	/*计算该月总天数*/
	days = get_month_days(year,month);

	/*输出该月总天数*/
	if(days > 0)
	{
		printf("Ther are %d days in %d-%d\n",days,year,month);
	}
	else
	{
		printf("Your input month is invalid\n");
	}
	return 0;
}

int get_month_days(int y,int m)
{
	int sum = 0;

	/*判断月份的合法性*/
	if(m < 1 || m > 12)
	{
		return -1;
	}

	/*计算合法月份的总天数*/
	switch(m)
	{
		case 1:
		case 3:
		case 5:
		case 7:
		case 8:
		case 10:
		case 12:
			sum = 31;
			break;
		case 4:
		case 6:
		case 9:
		case 11:
			sum = 30;
			break;
		case 2:
			if(is_leap_year(y))
			{
				sum = 29;
			}
			else
			{
				sum = 28;
			}
			break;
	}
	return sum;
}

int is_leap_year(int y)
{
	if((y % 4 == 0 && y % 100 != 0) || (y % 400 == 0))
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int input_year()
{
	int y = 0;

	printf("Please input a year:\n");
	scanf("%d",&y);

	return y;
}

int input_month()
{
	int m = 0;

	printf("Please input a month:\n");
	scanf("%d",&m);

	return m;
}

```



## 六、循环语句

**如果已知循环次数通常用：** ==for==

**如果未知循环次数通常用：**==while==

**如果忽略终止条件，执行一次条件体通常用:**==do_while==



### 1、while_循环

#### (1)、MF_求商和余数（减法实现）

实现用减法实现整除，求出商和余数（不必多函数）

```c
MF while 求商河余数
#include <stdio.h>

int input_number();

int main()
{
	int n1 = input_number();
	int n2 = input_number();
	int y = 0;
	int r = 0;

	while(n1 >= n2)
	{
		r++;
		n1 = n1 - n2;
	}
	y = n1;
	
	printf("r = %d,y = %d\n",r,y);

	return 0;
}

int input_number()
{
	int x = 0;

	printf("Please input a number:\n");
	scanf("%d",&x);

	while(getchar() != '\n')
	{
	}

	return x;
}

```



#### (2)、MF_判断一个数，是否包含’3‘

```c
  MF while 判断num是否包含‘3’
#include <stdio.h>


int is_include_3(int n);
int input_number();

int main()
{
	/*输入一个数*/
	int num = input_number();
	int flag = 0;


	/*判断其是否某位是3*/
	flag = is_include_3(num);

	/*输出结果*/
	if(flag)
	{
		printf("%d include 3\n",num);
	}
	else
	{
		printf("%d do not include 3\n",num);
	}
	return 0;
}

int input_number()
{
	int x = 0;

	printf("Please input a number:\n");
	scanf("%d",&x);

	return x;
}

int is_include_3(int n)
{
	while(n != 0 && n % 10 != 3)
	{
		n = n / 10;
	}
	if(0 == n)
	{
		return 0;
	}
	else
	{
		return 1;
	}
}

```



#### (3)、MF_公约数、公倍数

编写一个程序，输入两个自然数，分别求它们的最大公约数gcd和最小公倍数lcm

```c
MF 未知

#include <stdio.h>

int get_lcm(int x,int y);
int get_gcd(int x,int y);
int input_number();

int main()
{
	int n1 = input_number();
	int n2 = input_number();

	if(n1 < 1 || n2 < 1)
	{
		printf("Your input number is not natrue-number\n");
		return 1;
	}

	printf("GCD of %d and %d is %d\n",get_gcd(n1,n2),n1,n2);
	printf("LCM of %d and %d is %d\n",get_lcm(n1,n2),n1,n2);
	return 0;
}

int input_number()
{
	int num = 0;

	printf("Please input a number:\n");
	scanf("%d",&num);

	while(getchar() != '\n')
	{
	}

	return num;
}

int get_gcd(int x,int y)
{
	int t = 0;

	t = x % y;
	while(t != 0)
	{
		x = y;
		y = t;
		t = x % y;
	}

	return y;
}

int get_lcm(int x,int y)
{
	int t = 0;

	if(x < y)
	{
		t = x;
		x = y;
		y = t;
	}

	for(t = 1;t <= y;t++)
	{
		if((t * x) % y == 0)
		{
			break;
		}
	}

	return t*x;
}


```

### 2、do_while循环

#### （1）、猜数字

```c
do——while猜数字

#include <stdio.h>
#include <stdlib.h>

#include <time.h>

int main()
{
	int pnum = 0;//pc number
	int unum = 0;//user number

	srand(time(NULL));

	pnum = rand() % 10 + 1;

	do
	{
		/*用户输入一个数*/
		printf("Please input a number:\n");
		scanf("%d",&unum);

		/*判断unum < pnum，是则输出太小*/
		if(unum < pnum)
		{
			printf("Your input too small\n");
		}
		
		/*判断unum > pnum，是则输出太大*/
		if(unum > pnum)
		{
			printf("Your input too big\n");
		}

	}while(unum != pnum);

	printf("You are right!\n");

	return 0;
}

```



#### （2）、MF_brotherOK

1. 游戏：石头剪刀布，每轮完要求询问是否继续，输入Y/y则进行下一轮游戏，输入其它字符则结束程序？ （多函数）
   备注：设0为石头、1剪刀、2布，则判断输赢的规则为：
   用户输入的数u     计算机产生的[0-2]随机数p      输赢
       0                                  1                               赢
       1                                  2                               赢
       2                                  0                               赢
     u == p 为平局
   （u + 1）% 3 == p 为用户赢，否则用户输

```c

MF 兄弟OK
#include <stdio.h>
#include <stdlib.h>

#include <time.h>

int input_number();
int input_sum();
int judge(int u,int us,int p,int ps);
int do_you_continue();
int main()
{
	int pnum = 0;
	int psum = 0;
	int unum = 0;
	int usum = 0;
	int ret = 0;
	
	srand(time(NULL));

	do
	{
		/*程序产生一个【0，5】随机数----手指*/
		pnum = rand() % 6;

		/*程序产生一个【1，5】随机数--- 和*/
		psum = rand() % 6  + pnum;

		/*用户输入一个【0，5】数字 ---- 手指*/
		unum = input_number();

		/*用户输入一个【0，10】数字 ---- 和*/
		usum = input_sum();

		/*判断输赢*/
		ret = judge(unum,usum,pnum,psum);
		if(ret == 0)
		{
			/*输出平*/
			printf("Peace\n");
		}
		else
		{
			if(ret > 0)
			{
				/*输出赢*/
				printf("You win\n");
			}
			else
			{
				/*输出输*/
				printf("You lost\n");
			}
		}
	}while(/*用户选择是否继续*/do_you_continue());

	printf("Game Over\n");
	return 0;
}

int judge(int u,int us,int p,int ps)
{
	int uok = 0;
	int pok = 0;

	if(u+p == us)
	{
		uok = 1;
	}
	if(u+p == ps)
	{
		pok = 1;
	}

	if(uok == pok)
	{
		return 0;
	}
	else
	{
		if(uok)
		{
			return 1;
		}
		else
		{
			return -1;
		}
	}
}

int input_number()
{
	int x = -1;
	int redo = 0;

	do
	{
		redo = 0;
		printf("Please input your number[0,5]:\n");
		scanf("%d",&x);

		while(getchar() != '\n')
		{
		}

		if(x < 0 || x >5)
		{
			printf("Your num is invalid,please re-input\n");
			redo = 1;
		}
	}while(redo);

	return x;
}

int input_sum()
{
	int x = -1;
	int redo = 0;

	do
	{
		redo = 0;
		printf("Please input your sum[0,10]:\n");
		scanf("%d",&x);

		while(getchar() != '\n')
		{
		}

		if(x < 0 || x >10)
		{
			printf("Your sum is invalid,please re-input\n");
			redo = 1;
		}
	}while(redo);

	return x;
}
int do_you_continue()
{
	char ch = '\0';

	printf("Do you continue,Y/y\n");
	ch = getchar();

	while(getchar() != '\n')
	{
	}

	if(ch == 'Y' || ch == 'y')
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

```



#### （3）、MF _猜拳游戏

```c
MF 综合 猜拳游戏
#include <stdio.h>
#include <stdlib.h>

#include <time.h>

int input_number();
int judge(int u,int p);
int do_you_continue();
int main()
{
	int pnum = 0;
	int unum = 0;
	int ret = 0;
	
	srand(time(NULL));

	do
	{
		/*程序产生一个【0，2】随机数*/
		pnum = rand() % 3;

		/*用户输入一个【0，2】数字*/
		unum = input_number();

		/*判断输赢*/
		ret = judge(unum,pnum);
		if(ret == 0)
		{
			/*输出平*/
			printf("Peace\n");
		}
		else
		{
			if(ret > 0)
			{
				/*输出赢*/
				printf("You win\n");
			}
			else
			{
				/*输出输*/
				printf("You lost\n");
			}
		}
	}while(/*用户选择是否继续*/do_you_continue());

	printf("Game Over\n");
	return 0;
}

int judge(int u,int p)
{
	if(u == p)
	{
		return 0;
	}
	else
	{
		if((u+1)%3 == p)
		{
			return 1;
		}
		else
		{
			return -1;
		}
	}
}

int input_number()
{
	int x = -1;
	int redo = 0;

	do
	{
		redo = 0;
		printf("Please input your select:\n");
		printf("0 stone\n");
		printf("1 scissor\n");
		printf("2 paper\n");
		scanf("%d",&x);

		while(getchar() != '\n')
		{
		}

		if(x < 0 || x >2)
		{
			printf("Your select is invalid,please reselect\n");
			redo = 1;
		}
	}while(redo);

	return x;
}

int do_you_continue()
{
	char ch = '\0';

	printf("Do you continue,Y/y\n");
	ch = getchar();

	while(getchar() != '\n')
	{
	}

	if(ch == 'Y' || ch == 'y')
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

```

### 3、for循环

#### （1）、输出200内偶数

打印1-200之间的所有的偶数，每行最多显示10个数 （可以不写成多函数形式）

```c
for 偶数
#include <stdio.h>

int main()
{
	int i = 0;
	int cnt = 0;

	for(i = 1;i <= 200;i++)
	{
		if(i % 2 == 0)
		{
			printf("%-4d",i);
			cnt++;
			if(cnt % 10 == 0)
			{
				printf("\n");
			}
		}
	}

	return 0;
}

```



#### （2）、水仙花

```c
for - if水仙花

#include <stdio.h>
#include <math.h>

int main()
{
	int num = 0;
	int g = 0;
	int s = 0;
	int h = 0;

	for(num = 100;num <= 999;num++)
	{
		g = num % 10;
		s = (num / 10)%10;
		h = num / 100;

		if(pow(g,3) + pow(s,3) + pow(h,3) == num)
		{
			printf("%d ",num);
		}
	}

	putchar('\n');
	return 0;
}

```

#### （3）、num是否是素数

```c
for-if 素数

#include <stdio.h>
#include <math.h>

int input_number();
int is_prime(int n);

int main()
{
	int num = input_number();

	if(num <= 1)
	{
		printf("Your input is invalid\n");
		return 1;
	}

	if(is_prime(num))
	{
		printf("%d is prime\n",num);
	}
	else
	{
		printf("%d is not prime\n",num);
	}
	return 0;
}

int is_prime(int n)
{
	int i = 0;
	int r = sqrt(n);

	//for(i = 2;i <= n-1;i++)
	for(i = 2;i <= r;i++)
	{
		if(n % i == 0)
		{
			break;
		}
	}

	if(i == r+1)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int input_number()
{
	int x = 0;

	printf("Please input a number:\n");
	scanf("%d",&x);

	while(getchar() != '\n')
	{
	}

	return x;
}

```



#### （4）、MF_完数

```c

MF 完数

#include <stdio.h>

int input_number();
int is_perfect_num(int num);


int main()
{
	int n = input_number();

	if(n <= 0)
	{
		printf("Your input error\n");
		return 1;
	}
	
	if(is_perfect_num(n))
	{
		printf("%d is perfect number\n",n);
	}
	else
	{
		printf("%d is not perfect number\n",n);
	}
	return 0;
}

int is_perfect_num(int num)
{
	int sum = 0;
	int i = 0;

	for(i = 1;i <= num - 1;i++)
	{
		if(num % i == 0)
		{
			sum = sum + i;
		}
	}
	if(sum == num)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int input_number()
{
	int x = 0;

	printf("Please input a number:\n");
	scanf("%d",&x);

	while(getchar() != '\n')
	{
	}

	return x;
}

```

### 4、for嵌套循环

#### （1）、左三角形

```c
for嵌套 基础靠左三角形
	#include <stdio.h>

int main()
{
	int i = 0;//行号
	int j = 0;//星号的个数

	for(i = 1;i <= 6;i++)
	{
		/*打印i个星号*/
		for(j = 1;j <= i;j++)
		{
			putchar('*');
		}

		/*打印一个换行符*/
		putchar('\n');
	}
	return 0;
}
```

#### （2）、字母等腰三角

打印等腰三角形
     A
    BBB
   CCCCC
  。。。。
Z..............Z
共计26行

```c
for嵌套，字母等腰三角


#include <stdio.h>

int main()
{
	int line = 0;
	int sp = 0;
	int ch = 0;

	for(line = 1;line <= 26;line++)
	{
		for(sp = 1;sp <= 26 - line;sp++)
		{
			putchar(' ');
		}

		for(ch = 1;ch <= 2 * line - 1;ch++)
		{
			putchar('A' + line - 1);
		}

		putchar('\n');
	}

	return 0;
}

```



#### （3）、菱形

```c
for嵌套 菱形
#include <stdio.h>

int main()
{
	int line = 0;
	int sp = 0;
	int st = 0;

	/*打印前4行*/
	for(line = 1;line <= 4;line++)
	{
		/*打印4-line个空格*/
		for(sp=1;sp <= 4-line;sp++)
		{
			putchar(' ');
		}

		/*打印2*line-1个星号*/
		for(st=1;st <= 2 * line - 1;st++)
		{
			putchar('*');
		}

		/*打印一个换行*/
		putchar('\n');
	}


	/*打印后3行*/
	for(line = 1;line <= 3;line++)
	{
		/*打印line个空格*/
		for(sp=1;sp <= line;sp++)
		{
			putchar(' ');
		}

		/*打印2*(4-line)-1个星号*/
		for(st=1;st <= 2 * (4-line) - 1;st++)
		{
			putchar('*');
		}

		/*打印一个换行*/
		putchar('\n');
	}
	return 0;
}

```

#### （4）、九九乘法表

```c
for嵌套 九九乘法表
#include <stdio.h>

int main()
{
	int l = 0;//行号
	int c = 0;//列号

	/*打印第一行（列号）*/
	printf("  %-7d%-7d%-7d%-7d%-7d%-7d%-7d%-7d%-7d\n",1,2,3,4,5,6,7,8,9);

	/*打印后9行*/
	for(l = 1;l<=9;l++)	
	{
		/*打印行号*/
		printf("%-2d",l);

		/*打印l个乘积式子*/
		for(c=1;c<=l;c++)
		{
			printf("%d*%d=%-2d ",l,c,l*c);
		}

		/*打印一个换行*/
		putchar('\n');
	}

	return 0;
}

```

#### （5）、MF_100内素数

```c
MF for（嵌套函数for） 100 内素数
#include <stdio.h>

int is_prime(int n);
int main()
{
	int num = 0;

	for(num = 2;num < 100;num++)
	{
		if(is_prime(num))
		{
			printf("%d ",num);
		}

	}

	putchar('\n');

	return 0;
}

int is_prime(int n)
{
	int i = 0;

	for(i = 2;i <= n - 1;i++)
	{
		if(n % i == 0)
		{
			break;
		}
	}

	if(i == n)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

```

### 5、for三层嵌套

#### （1）、人民币换算（钱）

 求出用 50元、20元 和 10元换算 100元有几种方式？

```c
for嵌套  人民比换算
#include <stdio.h>

int main()
{
	int f = 0;//50 --- 2
	int tw = 0;//20 --- 5
	int te;//10 --- 10
	
	for(f = 0;f <= 2;f++)
	{
		for(tw = 0;tw <= 5;tw++)
		{
			for(te = 0;te <= 10;te++)
			{
				if(f * 50 + tw * 20 + te * 10 == 100)
				{
					printf("%d * 50 + %d * 20 + %d * 10 = 100\n",f,tw,te);
				}
			}
		}
	}
	return 0;
}

```



#### （2）、百元百鸡

​		百钱买鸡问题。一百个铜钱买了一百只鸡，其中公鸡一只5钱，母鸡一只3钱，小鸡一钱三只。问：一百只鸡中公鸡、母鸡、小鸡各有多少只？

```c
for嵌套  百元百鸡
#include <stdio.h>

int main()
{
	int m = 0;
	int f = 0;
	int l = 0;

	for(m = 0;m <=20;m++)
	{
		/*当公鸡数是m时罗列所有的母鸡数和小鸡数*/
		for(f=0;f <= 33;f++)
		{
			/*当公鸡数数为m，母鸡数为f时，罗列所有小鸡数*/
			/*for(l = 0;l <= 300;l++)
			{
				if(m+f+l == 100 && 5 * m + 3 * f + l / 3 == 100 && l % 3 == 0)
				{
					printf("m=%d,f=%d,l=%d\n",m,f,l);
				}
			}*/

			/*求出小鸡数*/
			l = 100 - m -f;
			if(l % 3 == 0 && 5 * m + 3 * f + l / 3 == 100)
			{
				printf("m=%d,f=%d,l=%d\n",m,f,l);
			}
		}
	}

	return 0;
}

```



#### （3）、车牌追踪

​       **追查车号。**题目描述题目内容：一辆卡车违反交通规则，撞人逃逸。现场三人目击事件，但都没有记住车号，只记下车的一些特。甲说：牌照的前两位数字是相同的；乙说：牌照的后两位数字是相同的；丙是位数学家，他说：四位的车号正好是一个整数的平方。请根据以上线索求出车号。

```c
for嵌套 车牌追踪

#include <stdio.h>

int main()
{
	int a = 0;
	int b = 0;
	int num = 0; 
	int i = 0;

	for(a = 1;a <= 9;a++)
	{
		for(b = 0;b <= 9;b++)
		{
			num = a * 1000 + a * 100 + b * 10 + b;
			for(i = 31;i < 100;i++)
			{
				if( i * i == num)
				{
					break;
				}
			}
			if(i < 100)
			{
				printf("%d * %d = %d\n",i,i,num);
			}
		}
	}
	return 0;
}

```

## 七、实现日历

```tex
题目：
用户输入年、月，程序输出本月月历，如：用户输入2019 4,程序输出： 
SUN MON TUE WED THU FRI SAT
      1   2   3   4   5   6
  7   8   9  10  11  12  13  
 14  15  16  17  18  19  20  
 21  22  23  24  25  26  27
 28  29  30    
已知计算星期的公式为：
 sum = (y-1) + (y-1)/4 - (y-1)/100 + (y-1)/400 + 本日是本年的第多少天 （除法为整除）
 week = sum % 7; 其中0为星期日
本题应由如下函数组成：
main：程序入口
is_leapyear：判断是不是闰年
get_month_days：给定年月求本月的总天数
is_valid_date：判断给定的年月日是否合法
get_year_days：给定年月日求本日是本年的第多少天，
               如2018年1月2日是2018年的第2天
               2019年2月3日是2019年的第34天
get_week：给定年月日求本日是星期几
input_year：获取用户输入的年份
input_month：获取用户输入的月份
print_month_calendar：打印月历
```

```c
/*main.c*/ //主函数
#include <stdio.h>

int input_month();
int input_year();

int is_valid_date(int y,int m,int d);
int print_calendar(int y,int m);
int main()
{
	int year = input_year();
	int month = input_month();

	if(!is_valid_date(year,month,1))
	{
		printf("Your input error\n");
		return 1;
	}

	print_calendar(year,month);
	return 0;
}

int input_year()
{
	int y = 0;

	printf("Please input year:\n");
	scanf("%d",&y);

	while(getchar() != '\n')
	{
	}
	return y;
}

int input_month()
{
	int m = 0;

	printf("Please input month:\n");
	scanf("%d",&m);

	while(getchar() != '\n')
	{
	}
	return m;
}


```

```c
/*date*///日期
int is_leap_year(int y)
{
	if((y % 4 == 0 && y % 100 != 0) || (y % 400 == 0))
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int get_month_days(int y,int m)
{
	int ret = 0;
	switch(m)
	{
		case 1:
		case 3:
		case 5:
		case 7:
		case 8:
		case 10:
		case 12:
			ret = 31;
			break;
		case 4:
		case 6:
		case 9:
		case 11:
			ret = 30;
			break;
		case 2:
			if(is_leap_year(y))
			{
				ret = 29;
			}
			else
			{
				ret = 28;
			}
			break;
	}

	return ret;
}

int is_valid_date(int y,int m,int d)
{
	int days = 0;
	if(m < 1 || m > 12)
	{
		return 0;
	}

	days = get_month_days(y,m);
	if(d < 1 || d > days)
	{
		return 0;
	}

	return 1;
}

int get_year_days(int y,int m,int d)
{
	int i = 0;
	int ret = 0;

	for(i = 1;i <= m-1;i++)
	{
		ret += get_month_days(y,i);
	}

	return ret + d;
}

int get_year_days(int y,int m,int d);
int get_week(int y,int m,int d)
{
	int sum = 0;

	sum = (y-1) + (y-1)/4 - (y-1) / 100 + (y-1)/400 + get_year_days(y,m,d);

	return sum % 7;
}
```

```c
/*calendar*///输出
#include <stdio.h>

int get_month_days(int y,int m);
int get_week(int y,int m,int d);
int print_calendar(int y,int m)
{
	int days = get_month_days(y,m);
	int week = get_week(y,m,1);
	int sp = 0;
	int d = 0;

	printf("SUN MON TUE WED THU FRI SAT\n");
	/*打印空格---week * 4*/
	for(sp = 1;sp <= week * 4;sp++)
	{
		putchar(' ');
	}

	for(d = 1;d <= days;d++)
	{
		printf("%-4d",d);
		if((d+week) % 7 == 0)
		{
			putchar('\n');
		}
	}
	putchar('\n');

	return 0;
}


```



# ***数组

## 一、一维数组

### 1、一维数组的输入、输出

#### （1）、输入、输出

```c
输入输出一个数组，
#include <stdio.h>

#define N 5
int main()
{
	float arr[N] = {0.0f};
	int i = 0;


	printf("Please input %d number:\n",N);
	for(i = 0;i < N;i++)
	{
		scanf("%f",&arr[i]);
	}

	for(i = 0;i < N;i++)
	{
		printf("%.1f ",arr[i]);
	}
	printf("\n");
	return 0;
}

```



### 2、一维数组的删除

#### （1）、删除指定位的数据

```c
删除i位的数
#include <stdio.h>

#define N 8

int main()
{
	int arr[N] = {6,9,12,8,4,5,3,21};
	int cnt = N;
	int i = 0;
	int loc = 0;

	printf("Before delete:\n");
	for(i = 0;i < cnt;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	printf("Please input a location[0,%d]:\n",N-1);
	scanf("%d",&loc);

	if(loc < 0 || loc >= N)
	{
		printf("Your input location is invalid\n");
		return 1;
	}

	for(i = loc + 1;i < N;i++)
	{
		arr[i-1] = arr[i];
	}
	cnt--;

	printf("After delete [3]:\n");
	for(i = 0;i < cnt;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	return 0;
}

```



#### （2）、删除指定元素、字符

```c
输入一个数在数组中删除你输入的数
#include <stdio.h>

#define N 10
int main()
{
	char arr[N] = {'q','w','e','r','t','e','e','t','q','t'};
	int cnt = N;
	char ch = '\0';
	int i = 0;
	int j = 0;

	/*用户输入一个字符*/
	printf("Please input a char:\n");
	ch = getchar();

	/*删除ch*/
	for(i = 0;i < N;i++)
	{
		if(arr[i] != ch)
		{
			arr[j] = arr[i];
			j++;
		}
		else
		{
			cnt--;
		}
	}

	/*输出字符数组*/
	for(i = 0;i < cnt;i++)
	{
		putchar(arr[i]);
	}
	putchar('\n');
	return 0;
}

```



### 3、一维数组的插入

#### （1）、在指定位插入数据

```c
指定位置插入数
#include <stdio.h>

#define N 8
int main()
{
	int arr[N+1] = {6,9,12,8,4,5,3,21};
	int cnt = N;
	int num = 0;
	int i = 0;
	int loc = 0;

	printf("Please input a number:\n");
	scanf("%d",&num);

	printf("Before insert:\n");
	for(i = 0;i < cnt;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	printf("Please input a location[0,%d]:\n",N);
	scanf("%d",&loc);

	if(loc < 0 || loc > N)
	{
		printf("Your input location is invalid\n");
		return 1;
	}

	for(i = cnt-1;i >= loc;i--)
	{
		arr[i+1] = arr[i];
	}
	arr[i+1] = num;
	cnt++;

	printf("After insert:\n");
	for(i = 0;i < cnt;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');
	return 0;
}

```



#### （2）、num插入有序数组

​		练习：已知有个有序数组，包含8个float型元素（自行初始化成从小到大的有序数组），用户输入一个新数，将该数插入到数组中，要求仍然保证其是从小到大的有序数组，然后输出数组

```c
在一个有序数组中插入数据，并保持顺序
#include <stdio.h>

#define N 8
int main()
{
	float arr[N+1] = {1.2,2.3,3.4,4.5,5.6,6.7,7.8,8.9};
	int cnt = N;
	float num = 0.0f;
	int i = 0;

	printf("Please input a float number:\n");
	scanf("%f",&num);

	for(i = cnt - 1;i >= 0;i--)
	{
		if(arr[i] > num)
		{
			arr[i+1] = arr[i];
		}
		else
		{
			break;
		}
	}
	arr[i+1] = num;
	cnt++;

	printf("After insert:\n");
	for(i = 0;i < cnt;i++)
	{
		printf("%.1f ",arr[i]);
	}
	putchar('\n');

	return 0;
}

```

### 4、一维数组的查找

#### （1）、一维数组的最大值，最小值

```c
最大值、最小值
#include <stdio.h>

#define N 6
int main()
{
	int arr[N] = {0};
	int i = 0;
	int max = 0;
	int min = 0;

	/*数组输入*/
	printf("Please input %d number:\n",N);
	for(i = 0;i < N;i++)
	{
		scanf("%d",&arr[i]);
	}


	for(i = 1;i < N;i++)
	{
		if(arr[i] > arr[max])
		{
			max = i;
		}
		if(arr[i] < arr[min])
		{
			min = i;
		}
	}

	printf("The max number is %d,at %d\n",arr[max],max);
	
	/*for(i = 1;i < N;i++)
	{
		if(arr[i] < arr[min])
		{
			min = i;
		}
	}*/
	printf("The min number is %d,at %d\n",arr[min],min);
	return 0;
}

```



#### （2）、普通查找

```c
普通查找
#include <stdio.h>

#define N 6
int main()
{
	int arr[N] = {0};
	int i = 0;
	int num = 0;

	/*数组输入*/
	printf("Please input %d number:\n",N);
	for(i = 0;i < N;i++)
	{
		scanf("%d",&arr[i]);
	}

	/*用户输入要查找的数*/
	printf("Please input a number:\n");
	scanf("%d",&num);

	/*在数组中查找num，找到则输出第一出现的下标位置，没找到则打印Not found*/
	for(i = 0;i < N;i++)
	{
		if(arr[i] == num)
		{
			break;
		}
	}
	if(i == N)
	{
		printf("Not found\n");
	}
	else
	{
		printf("%d at %d\n",num,i);
	}



	return 0;
}

```

#### （3）、二分法查找（折半）

```c
二分查找法
#include <stdio.h>

#define N 8

int main()
{
	int arr[8] = {2,4,6,8,10,12,14,16};
	int num = 0;
	int low = 0;
	int high = 0;
	int mid = 0;

	printf("Please input a number:\n");
	scanf("%d",&num);

	low = 0;
	high = N - 1;
	
	while(low <= high)
	{
		//mid = (low+high)/2;
		mid = low + (num - arr[low]) * (high - low) / (arr[high]-arr[low]);
		if(arr[mid] > num)
		{
			high = mid - 1;
		}
		else if(arr[mid] < num)
		{
			low = mid + 1;
		}
		else
		{
			break;
		}
	}
	if(low > high)
	{
		printf("Not found\n");
	}
	else
	{
		printf("%d is at %d\n",num,mid);
	}

	return 0;
}

```

#### （4）、哨兵法查找

```c
哨兵查找法
#include <stdio.h>

#define N 6
int main()
{
	int arr[N+1] = {0};
	int i = 0;
	int num = 0;

	/*数组输入*/
	printf("Please input %d number:\n",N);
	for(i = 0;i < N;i++)
	{
		scanf("%d",&arr[i]);
	}

	/*用户输入要查找的数*/
	printf("Please input a number:\n");
	scanf("%d",&num);

	/*在数组中查找num，找到则输出第一出现的下标位置，没找到则打印Not found*/
	arr[N] = num;
	for(i = 0;arr[i] != num;i++)
	{
	}
	if(i == N)
	{
		printf("Not found\n");
	}
	else
	{
		printf("%d at %d\n",num,i);
	}



	return 0;
}

```

### 5、一维数组的排序

#### （1）、选择排序法

```c
#include <stdio.h>

#define N 8
int main()
{
	int arr[N] = {85,32,66,73,52,46,27,12};
	int i = 0;//轮数
	int j = 0;//协助每轮在【i，N-1】间找最小元素的下标
	int min = 0;//存放每轮最小元素的下标
	int t = 0;//协助完成下标min的元素与下标i的元素交换

	for(i = 0;i < N;i++)
	{
		/*在[i,N-1]间找最小元素下标，结果存放在min空间中*/
		min = i;
		for(j = i+1;j < N;j++)
		{
			if(arr[j] < arr[min])
			{
				min = j;
			}
		}

		/*下标min的元素与下标i的元素进行交换*/
		if(min != i)
		{
			t = arr[min];
			arr[min] = arr[i];
			arr[i] = t;
		}
	}

	printf("After sort:\n");
	for(i = 0;i < N;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	return 0;
}

```



#### （2）、冒泡排序法

```c
冒泡排序法
#include <stdio.h>

#define N 8
int main()
{
	int arr[N] = {85,32,66,73,52,46,27,12};
	int i = 0;//轮数
	int j = 0;//协助每轮在【0，N-1-i】间将最大元素通过多次的比较交换到下标N-i位置
	int t = 0;//协助完成下标j的元素与下标j+1的元素交换

	for(i = 0;i < N;i++)
	{
		/*在【0，N-1-i】间将最大元素通过多次的比较交换到下标N-i位置*/
		for(j = 0;j < N - 1 - i;j++)
		{
			if(arr[j] > arr[j+1])
			{
				t = arr[j];
				arr[j] = arr[j+1];
				arr[j+1] = t;
			}
		}
	}

	printf("After sort:\n");
	for(i = 0;i < N;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	return 0;
}

```



#### （3）、插入排序法

```c
插入排序法
#include <stdio.h>

#define N 8
int main()
{
	int arr[N] = {85,32,66,73,52,46,27,12};
	int i = 0;//轮数
	int j = 0;//协助每轮在【0，N-1-i】间将最大元素通过多次的比较交换到下标N-i位置
	int t = 0;//协助完成下标j的元素与下标j+1的元素交换

	for(i = 1;i < N;i++)
	{
		//1. arr[i] ---->  t
		t = arr[i];
		
		//2. 将t插入在[0,i](i位为空位)，插入后确保[0,i]范围从小到大排序
		for(j=i-1;j>=0;j--)
		{
			if(arr[j] > t)
			{
				arr[j+1] = arr[j];
			}
			else
			{
				break;
			}
		}
		arr[j+1] = t;
	}


	printf("After sort:\n");
	for(i = 0;i < N;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	return 0;
}

```

#### （4）、MF_三种基本排序法

```c
MF 三种基本排序法
#include <stdio.h>

int input_dbl_array(double buf[],int cnt);
int print_dbl_array(double buf[],int cnt);
int select_sort(double buf[],int cnt);
int bubble_sort(double buf[],int cnt);
int insert_sort(double buf[],int cnt);
#define N 6
int main()
{
	double arr[N] = {0.0};

	/*用户输入N个小数*/
	input_dbl_array(arr,N);


	/*排序*/
	//select_sort(arr,N);
	//bubble_sort(arr,N);
	insert_sort(arr,N);


	/*输出排序后的数组*/
	print_dbl_array(arr,N);
	return 0;
}

int input_dbl_array(double buf[],int cnt)
{
	int i = 0;

	if(cnt <= 0)
	{
		printf("Input param is invalid\n");
		return -1;
	}

	printf("Please input %d float-number:\n",cnt);
	for(i = 0;i < cnt;i++)
	{
		scanf("%lf",&buf[i]);
	}

	while(getchar() != '\n')
	{
	}

	return 0;
}

int print_dbl_array(double buf[],int cnt)
{
	int i = 0;

	for(i = 0;i < cnt;i++)
	{
		printf("%.1f ",buf[i]);
	}
	printf("\n");
	return 0;
}

int select_sort(double buf[],int cnt)
{
	int i = 0;
	int j = 0;
	int min = 0;
	double t = 0.0;


	for(i = 0;i < cnt;i++)
	{
		min = i;
		for(j = i+1;j < cnt;j++)
		{
			if(buf[j] < buf[min])
			{
				min = j;
			}
		}

		if(min != i)
		{
			t = buf[i];
			buf[i] = buf[min];
			buf[min] = t;
		}
	}

	return 0;
}

int bubble_sort(double buf[],int cnt)
{
	int i = 0;
	int j = 0;
	double t = 0.0;


	for(i = 0;i < cnt;i++)
	{
		for(j=0;j < cnt - i - 1;j++)
		{
			if(buf[j] > buf[j+1])
			{
				t = buf[j];
				buf[j] = buf[j+1];
				buf[j+1] = t;
			}
		}
	}

	return 0;
}

int insert_sort(double buf[],int cnt)
{
	int i = 0;
	int j = 0;
	double t = 0.0;

	for(i = 1;i < cnt;i++)
	{
		t = buf[i];

		for(j = i-1;j>=0;j--)
		{
			if(buf[j] > t)
			{
				buf[j+1] = buf[j];
			}
			else
			{
				break;
			}
		}
		buf[j+1] = t;
	}
	
	return 0;
}

```

### 6、一维数组的综合应用

#### （1）、计算每月天数——数组

```c
月天数
#include <stdio.h>

int input_month();
int input_year();
int is_leap_year(int y);
int get_month_days(int y,int m);
int main()
{
	/*输入年月*/
	int year = input_year();
	int month = input_month();
	int days = 0;

	/*计算该月总天数*/
	days = get_month_days(year,month);

	/*输出该月总天数*/
	if(days > 0)
	{
		printf("Ther are %d days in %d-%d\n",days,year,month);
	}
	else
	{
		printf("Your input month is invalid\n");
	}
	return 0;
}

int get_month_days(int y,int m)
{
	int leap_year_days[12] = {31,29,31,30,31,30,31,31,30,31,30,31};
	int common_year_days[12] = {31,28,31,30,31,30,31,31,30,31,30,31};

	/*判断月份的合法性*/
	if(m < 1 || m > 12)
	{
		return -1;
	}

	/*计算合法月份的总天数*/
	if(is_leap_year(y))
	{
		return leap_year_days[m-1];
	}
	else
	{
		return common_year_days[m-1];
	}
}

int is_leap_year(int y)
{
	if((y % 4 == 0 && y % 100 != 0) || (y % 400 == 0))
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int input_year()
{
	int y = 0;

	printf("Please input a year:\n");
	scanf("%d",&y);

	return y;
}

int input_month()
{
	int m = 0;

	printf("Please input a month:\n");
	scanf("%d",&m);

	return m;
}

```



#### （2）、回文

```c
回文
#include <stdio.h>

int is_hui1(char arr[],int cnt);
int is_hui2(char arr[],int start,int end);
int is_hui3(char start[],char end[]);
int is_hui4(char start[]);//只能用在有特殊元素作为结束标记的数组
int main()
{
	char arr1[5] = {'a','b','c','b','a'};
	char arr2[6] = {'a','b','c','c','b','a'};
	char arr3[5] = {'a','b','c','d','a'};
	char arr4[6] = {'a','b','c','e','b','a'};
	char arr5[6] = {'a','b','b','a','\0','a'};

	if(is_hui1(&arr1[0],5))//if(is_hui(arr1,5))
	{
		printf("arr1 is huiwen\n");
	}	

	if(is_hui2(&arr2[0],0,5))
	{
		printf("arr2 is huiwen\n");
	}	
	if(is_hui3(&arr3[0],&arr3[4]))
	{
		printf("arr3 is huiwen\n");
	}	
	if(is_hui3(&arr4[0],&arr4[5]))
	{
		printf("arr4 is huiwen\n");
	}	
	if(is_hui4(arr5))
	{
		printf("arr5 is huiwen\n");
	}	
	return 0;
}

int is_hui1(char arr[],int cnt)
{
	int flag = 1;
	int i = 0;
	int j = 0;

	for(i=0,j=cnt-1;i < cnt / 2;i++,j--)
	{
		if(arr[i] != arr[j])
		{
			flag = 0;
			break;
		}
	}

	return flag;
}

int is_hui2(char arr[],int start,int end)
{
	int flag = 1;
	int i = 0;
	int j = 0;

	for(i = start,j=end;i < (end-start+1)/2;i++,j--)
	{
		if(arr[i] != arr[j])
		{
			flag = 0;
			break;
		}
	}

	return flag;
}

int is_hui3(char start[],char end[])
{
	int flag = 1;
	int cnt = end - start + 1;
	int i = 0;
	int j = 0;

	for(i = 0,j =cnt-1;i < cnt/2;i++,j--)
	{
		if(start[i] != start[j])
		{
			flag = 0;
			break;
		}
	}

	return flag;
}

int is_hui4(char start[])
{
	int i = 0;
	int end = 0;
	int j = 0;
	int flag = 1;

	while(start[i]!='\0')
	{
		i++;
	}
	end = i;

	for(i = 0,j =end-1;i < end/2;i++,j--)
	{
		if(start[i] != start[j])
		{
			flag = 0;
			break;
		}
	}

	return flag;
}

```



#### （3）、去最高、低，求平均分

```c
去掉最高分最低分求平均
#include <stdio.h>

#define N 10
int main()
{
	int arr[N] = {0};
	int i = 0;
	int cnt = N;
	int max = 0;
	int min = 0;
	int sum = 0;

	/*输入10个分数*/
	printf("Please input %d score:\n",cnt);
	for(i = 0;i < cnt;i++)
	{
		scanf("%d",&arr[i]);
	}


	/*找最大的下标*/
	for(i = 1;i < cnt;i++)
	{
		if(arr[i] > arr[max])
		{
			max = i;
		}
	}

	/*删除最大元素*/
	for(i = max + 1;i < cnt;i++)
	{
		arr[i-1] = arr[i];
	}
	cnt--;
	
	/*找最小元素的下标*/
	for(i = 1;i < cnt;i++)
	{
		if(arr[i] < arr[min])
		{
			min = i;
		}
	}

	/*删除最小元素*/
	for(i = min + 1;i < cnt;i++)
	{
		arr[i-1] = arr[i];
	}
	cnt--;

	/*求和*/
	for(i = 0;i < cnt;i++)
	{
		sum += arr[i];
	}

	/*输出最终得分*/
	printf("Last Score:%.2f\n",(float)sum / cnt);
	return 0;
}

```



#### （4）、随机10个数，求平均

练习：定义一个包含10个int型元素的数组，产生10个【23~75】间的随机数赋值给该数组中的元素，求数组中元素的总和和均值

```c
在23-75之间随机得到10个数，求平均
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define N 10
int main()
{
	int arr[N] = {0};
	int i = 0;
	int sum = 0;
	float ave = 0.0f;

	srand(time(NULL));

	for(i = 0;i < N;i++)
	{
		arr[i] = rand() % 53 + 23;
	}

	for(i = 0;i < N;i++)
	{
		printf("%d ",arr[i]);
	}
	putchar('\n');

	for(i = 0;i < N;i++)
	{
		sum = sum + arr[i];
	}

	ave = (float)sum / N;

	printf("The sum is %d,The ave is %.2f\n",sum,ave);
	return 0;
}

```



## 二、字符数组、字符串



### 1、统计字符在字符串中出现的次数

练习：定义一个字符数组用字符串常量初始化，统计其中字符'a'的个数

```c
统计字符在字符串中出现的次数
#include <stdio.h>

int count_times(char buf[],char ch);

int main()
{
	char str[] = "asgdaasdfas";

	printf("The occur-times of a is %d\n",count_times(str,'a'));
	return 0;
}

int count_times(char buf[],char ch)
{
	int i = 0;
	int cnt = 0;

	if(ch == '\0')
	{
		printf("The param ch is invalid\n");
		return -1;
	}

	while(buf[i] != '\0')
	{
		if(buf[i] == ch)
		{
			cnt++;
		}

		i++;
	}

	return cnt;
}

```

### 2、字符数组的字节数和有效字符数

```c
字符串字符数组
#include <stdio.h>

int my_strlen(char str[]);
int main()
{
	char buf1[] = {'a','b','c'};
	char buf2[] = {'a','b','c','\0'};
	char buf3[] = "abcde";

	//printf("strlen of buf1 = %d\n",my_strlen(buf1));//无意义，buf1不是字符串
	printf("size of buf1=%lu\n",sizeof(buf1));
	printf("strlen of buf2 = %d,size of buf2=%lu\n",my_strlen(buf2),sizeof(buf2));
	printf("strlen of buf3 = %d,size of buf3=%lu\n",my_strlen(buf3),sizeof(buf3));

	printf("%c\n","hello"[1]);

	"hello"[1] = 'E';

	printf("111111111111111\n");
	return 0;
}

int my_strlen(char str[])
{
	int cnt = 0;
	int i = 0;

	while(str[i] != '\0')
	{
		cnt++;
		i++;
	}
	return cnt;
}

```



## 三、二维数组

### 1、输入4*4数组周边之和

```c
#include <stdio.h>

#define N 4
#define M 4
int main()
{
	int arr[N][M] = {{0}};
	int i = 0;
	int j = 0;
	int sum = 0;

	printf("Please input %d * %d numbers:\n",N,M);
	for(i = 0;i < N;i++)
	{
		for(j = 0;j < M;j++)
		{
			scanf("%d",&arr[i][j]);
		}
	}

	for(i = 0;i < N;i++)
	{
		for(j = 0;j < M;j++)
		{
			if(0 == i || 0 == j || N-1 == i || M-1 ==j)
			{
				sum += arr[i][j];
			}
		}
	}

	printf("The sum is %d\n",sum);

	return 0;
}

```





# ***指针

## 初识指针（指针与一维数组）

### 1、指针法、地址法：输入和输出数组

```c
指针法、地址法：输入和输出数组
#include <stdio.h>

#define N 5
int main()
{
	float arr[N] = {0.0f};

	/*指针访问法*/
	float *pf = NULL;
	printf("Please input %d number:\n",N);
	for(pf = arr;pf < arr + N;pf++)
	{
		scanf("%f",pf);
	}

	for(pf = arr;pf < arr + N;pf++)
	{
		printf("%.1f ",*pf);
	}
	printf("\n");
	

	/*地址访问法*/
	/*
	int i = 0;
	printf("Please input %d number:\n",N);

	for(i = 0;i < N;i++)
	{
		scanf("%f",arr+i);
	}
	for(i = 0;i < N;i++)
	{
		printf("%.1f ",*(arr+i));
	}
	printf("\n");
	*/
	return 0;
}

```

### 2、地址法：在数组中查找某数，找到插入，没找到删除。

```c
地址法：在数组中查找某数，找到插入，没找到删除。
#include <stdio.h>

#define N 8
int main()
{
	int arr[N+1] = {2,4,6,8,10,12,14,16};
	int cnt = N;
	int num = 0;
	int loc = -1;
	int i = 0;

	/*用户输入一个数---->num*/
	printf("Please input your number:\n");
	scanf("%d",&num);

	/*在数组查找num ----->loc*/
	for(i = 0;i < cnt;i++)
	{
		if(num == *(arr+i))
		{
			loc = i;
			break;
		}
	}

	if(loc < 0)
	{//没找到，做插入
		for(i = cnt - 1;i >= 0;i--)
		{
			if(*(arr+i) > num)
			{
				*(arr+i+1) = *(arr+i);
			}
			else
			{
				break;
			}
		}
		*(arr+i+1) = num;
		cnt++;
	}
	else
	{//找到，做删除
		for(i = loc + 1;i < cnt;i++)
		{
			*(arr+i-1) = *(arr+i);
		}
		cnt--;
	}

	/*输出操作后的数组*/
	for(i = 0;i < cnt;i++)
	{
		printf("%d ",*(arr+i));
	}
	putchar('\n');

	return 0;
}

```

### 3、指针法：在数组中查找某数，找到插入，没找到删除。

```c
指针法：在数组中查找某数，找到插入，没找到删除。
#include <stdio.h>

#define N 8
int main()
{
	int arr[N+1] = {2,4,6,8,10,12,14,16};
	int cnt = N;
	int num = 0;
	int loc = -1;
	int *pi = NULL;

	/*用户输入一个数---->num*/
	printf("Please input your number:\n");
	scanf("%d",&num);

	/*在数组查找num ----->loc*/
	for(pi = arr;pi < arr + cnt;pi++)
	{
		if(num == *pi)
		{
			loc = pi - arr;
			break;
		}
	}

	if(loc < 0)
	{//没找到，做插入
		for(pi = arr + cnt - 1;pi >= arr;pi--)
		{
			if(*pi > num)
			{
				*(pi+1) = *pi;
			}
			else
			{
				break;
			}
		}
		*(pi+1) = num;
		cnt++;
	}
	else
	{//找到，做删除
		for(pi = arr + loc + 1;pi < arr + cnt;pi++)
		{
			*(pi-1) = *pi;
		}
		cnt--;
	}

	/*输出操作后的数组*/
	for(pi = arr;pi < arr+cnt;pi++)
	{
		printf("%d ",*pi);
	}
	putchar('\n');

	return 0;
}

```

### MF版在数组中查找某数，找到插入，没找到删除。(多  . C 文件版)

**main函数**

```c
**main函数**
#include <stdio.h>

int input_number();

int search_number(int *parr,int cnt,int n);
int insert_number(int *parr,int cnt,int n);
int delete_number(int *parr,int cnt,int l);
int print_array(int *parr,int cnt);

#define N 8
int main()
{
	int arr[N+1] = {2,4,6,8,10,12,14,16};
	int cnt = N;
	int num = 0;
	int loc = -1;

	/*用户输入一个数---->num*/
	num = input_number();

	/*在数组查找num ----->loc*/
	loc = search_number(arr,cnt,num);

	if(loc < 0)
	{//没找到，做插入
		insert_number(arr,N+1,num);
		cnt++;
	}
	else
	{//找到，做删除
		delete_number(arr,cnt,loc);
		cnt--;
	}

	/*输出操作后的数组*/
	print_array(arr,cnt);

	return 0;
}

int input_number()
{
	int x = 0;

	printf("Please input your number:\n");
	scanf("%d",&x);

	while(getchar() != '\n')
	{
	}

	return x;
}

```

**功能函数**

```c
功能函数

#include <stdio.h>
int search_number(int *parr,int cnt,int n)
{
	int *pi = NULL;

	for(pi = parr;pi < parr + cnt;pi++)
	{
		if(*pi == n)
		{
			break;
		}
	}

	if(pi == parr + cnt)
	{
		return -1;
	}
	else
	{
		return pi - parr;
	}
}

//cnt为整个数组的大小，而不是有效元素的个数
//返回值：返回0插入成功，失败-1
int insert_number(int *parr,int cnt,int n) 
{
	int *pi = NULL;

	for(pi = parr + cnt - 2;pi >= parr;pi--)
	{
		if(*pi > n)
		{
			*(pi+1) = *pi;
		}
		else
		{
			break;
		}
	}
	*(pi + 1) = n;

	return 0;
}

int delete_number(int *parr,int cnt,int l) 
{
	int *pi = NULL;

	if(l < 0 || l >= cnt)
	{
		printf("The loc of delete is invalid\n");
		return -1;
	}

	for(pi = parr + l + 1;pi < parr+cnt;pi++)
	{
		*(pi - 1) = *pi;
	}

	return 0;
}

int print_array(int *parr,int cnt)
{
	int *pi = NULL;

	for(pi = parr;pi < parr + cnt;pi++)
	{
		printf("%d ",*pi);
	}
	putchar('\n');

	return 0;
}

```



### 4、查找到数组中的最大值和最小值（指针形参作为函数返回值）

```c
查找到数组中的最大值和最小值（指针作为函数形参）
#include <stdio.h>

int find_maxmin(int *parr,int cnt,int *pmax,int *pmin);
#define N 6
int main()
{
	int arr[N] = {0};
	int i = 0;
	int rmax = 0;
	int rmin = 0;

	/*数组输入*/
	printf("Please input %d number:\n",N);
	for(i = 0;i < N;i++)
	{
		scanf("%d",&arr[i]);
	}

	find_maxmin(arr,N,&rmax,&rmin);
	printf("The max number is %d,at %d\n",arr[rmax],rmax);
	printf("The min number is %d,at %d\n",arr[rmin],rmin);
	return 0;
}

int find_maxmin(int *parr,int cnt,int *pmax,int *pmin)
{
	int max = 0;
	int min = 0;
	int *pi = NULL;

	if(NULL == parr || cnt <= 0 || NULL == pmax || NULL == pmin)
	{
		printf("Input param is invalid\n");
		return -1;
	}
	
	for(pi = parr + 1;pi < parr+N;pi++)
	{
		if(*pi > *(parr+max))
		{
			max = pi - parr;
		}
		if(*pi < *(parr+min))
		{
			min = pi - parr;
		}
	}

	*pmax = max;
	*pmin = min;

	return 0;
}

```

### 5、将两个字符串连接为一个字符串（一维数组）

```c
将两个字符串连接为一个字符串（一维数组）
#include <stdio.h>

int my_strcat(char inbuf1[],char inbuf2[],char outbuf[]);
int main()
{
	//char str1[] = "abcd";
	char str1[] = {'a','b','c','d'};
	char str2[] = "-1234";
	char str3[sizeof(str1) + sizeof(str2)] = "";

	my_strcat(str1,str2,str3);

	printf("The str3 is %s\n",str3);
	return 0;
}

int my_strcat(char inbuf1[],char inbuf2[],char outbuf[])
{
	int i = 0;
	int j = 0;

	while(inbuf1[i] != '\0')
	{
		outbuf[i] = inbuf1[i];
		i++;
	}

	while(inbuf2[j] != '\0')
	{
		outbuf[i] = inbuf2[j];
		i++;
		j++;
	}
	outbuf[i] = inbuf2[j];//copy '\0'
	
	return i+1;
}


```

### 6、评委评分，去掉最大值最小值求平均（地址法）

```c
评委评分，去掉最大值最小值求平均（地址法）
#include <stdio.h>

#define N 10
int main()
{
	int arr[N] = {0};
	int i = 0;
	int cnt = N;
	int max = 0;
	int min = 0;
	int sum = 0;

	/*输入10个分数*/
	printf("Please input %d score:\n",cnt);
	for(i = 0;i < cnt;i++)
	{
		scanf("%d",arr+i);
	}


	/*找最大的下标*/
	for(i = 1;i < cnt;i++)
	{
		if(*(arr+i) > *(arr+max))
		{
			max = i;
		}
	}

	/*删除最大元素*/
	for(i = max + 1;i < cnt;i++)
	{
		*(arr+i-1)= *(arr+i);
	}
	cnt--;
	
	/*找最小元素的下标*/
	for(i = 1;i < cnt;i++)
	{
		if(*(arr+i) < *(arr+min))
		{
			min = i;
		}
	}

	/*删除最小元素*/
	for(i = min + 1;i < cnt;i++)
	{
		*(arr+i-1) = *(arr+i);
	}
	cnt--;

	/*求和*/
	for(i = 0;i < cnt;i++)
	{
		sum += *(arr+i);
	}

	/*输出最终得分*/
	printf("Last Score:%.2f\n",(float)sum / cnt);
	return 0;
}

```

### 7、评委评分，去掉最大值最小值求平均（指针法）

```c
评委评分，去掉最大值最小值求平均（指针法）
#include <stdio.h>

#define N 10
int main()
{
	int arr[N] = {0};
	int cnt = N;
	int max = 0;
	int min = 0;
	int sum = 0;
	int *pi = NULL;

	/*输入10个分数*/
	printf("Please input %d score:\n",cnt);
	for(pi = arr;pi <arr + cnt;pi++)
	{
		scanf("%d",pi);
	}


	/*找最大的下标*/
	for(pi = arr+1;pi < arr + cnt;pi++)
	{
		if(*pi > *(arr+max))
		{
			max = pi - arr;
		}
	}

	/*删除最大元素*/
	for(pi = arr + max + 1;pi < arr+cnt;pi++)
	{
		*(pi-1) = *pi;
	}
	cnt--;
	
	/*找最小元素的下标*/
	for(pi = arr + 1;pi <arr + cnt;pi++)
	{
		if(*pi < *(arr+min))
		{
			min = pi - arr;
		}
	}

	/*删除最小元素*/
	for(pi = arr + min + 1;pi < arr + cnt;pi++)
	{
		*(pi-1) = *pi;
	}
	cnt--;

	/*求和*/
	for(pi = arr;pi < arr + cnt;pi++)
	{
		sum += *pi;
	}

	/*输出最终得分*/
	printf("Last Score:%.2f\n",(float)sum / cnt);
	return 0;
}

```

### 8、特殊字符结尾的普通数组（求和、平均）（指针形参作为参数返回值）[地址法]：

```c
特殊字符结尾的普通数组（求和、平均）（指针形参作为参数返回值）[地址法]：
#include <stdio.h>

int get_sum(int *pi,int *sum);
int main()
{
	int arr[] = {1,2,3,4,5,6,-1};
	int sum = 0;
	int len = 0;

	len = get_sum(arr,&sum);

	printf("The sum is %d,The ave is %.2f\n",sum,(float)sum/len);
	return 0;
}

int get_sum(int *pi,int *sum)
{
	int cnt = 0;
	int i = 0;

	*sum = 0;

	while(*(pi + i) != -1)
	{
		cnt++;
		*sum += *(pi+i);

		i++;
	}
	return cnt;
}

```



### 9、特殊字符结尾的普通数组（求和、平均）（指针形参作为参数返回值）【指针法】

```c
特殊字符结尾的普通数组（求和、平均）（指针形参作为参数返回值）【指针法】
#include <stdio.h>

int get_sum(int *pi,int *sum);
int main()
{
	int arr[] = {1,2,3,4,5,6,-1};
	int sum = 0;
	int len = 0;

	len = get_sum(arr,&sum);

	printf("The sum is %d,The ave is %.2f\n",sum,(float)sum/len);
	return 0;
}

int get_sum(int *pi,int *sum)
{
	int cnt = 0;

	*sum = 0;

	while(*pi != -1)
	{
		cnt++;
		*sum += *pi;

		pi++;
	}
	return cnt;
}

```



### 10、求二维数组四周之和

```c
求二维数组四周之和
#include <stdio.h>

#define N 4
#define M 4
int main()
{
	int arr[N][M] = {{0}};
	int i = 0;
	int j = 0;
	int sum = 0;

	printf("Please input %d * %d numbers:\n",N,M);
	for(i = 0;i < N;i++)
	{
		for(j = 0;j < M;j++)
		{
			scanf("%d",&arr[i][j]);
		}
	}

	for(i = 0;i < N;i++)
	{
		for(j = 0;j < M;j++)
		{
			if(0 == i || 0 == j || N-1 == i || M-1 ==j)
			{
				sum += arr[i][j];
			}
		}
	}

	printf("The sum is %d\n",sum);

	return 0;
}

```



### 11、（指针）求二维数组四周之和【地址法】

```c
（指针）求二维数组四周之和【地址法】
#include <stdio.h>

#define N 4
#define M 4
int main()
{
	int arr[N][M] = {{0}};
	int i = 0;
	int *p = 0;
	int sum = 0;

	printf("Please input %d * %d numbers:\n",N,M);
	for(i = 0;i < N;i++)
	{
		for(p = *(arr+i);p < *(arr+i) + M;p++)
		{
			scanf("%d",p);
		}
	}

	for(i = 0;i < N;i++)
	{
		for(p = *(arr+i);p < *(arr+i) + M;p++)
		{
			if(0 == i || 0 == p-(*(arr+i)) || N-1 == i || M-1 == p-(*(arr+i)))
			{
				sum += *p;
			}
		}
	}

	printf("The sum is %d\n",sum);

	return 0;
}

```





## 二、指针与字符数组（字符串）



### 1、用户输入一个字符并删除，输出数组。（地址法）

```c
用户输入一个字符并删除，输出数组。（地址法）
#include <stdio.h>

#define N 10
int main()
{
	char arr[N] = {'q','w','e','r','t','e','e','t','q','t'};
	int cnt = N;
	char ch = '\0';
	int i = 0;
	int j = 0;

	/*用户输入一个字符*/
	printf("Please input a char:\n");
	ch = getchar();

	/*删除ch*/
	for(i = 0;i < N;i++)
	{
		if(*(arr+i) != ch)
		{
			*(arr+j) = *(arr+i);
			j++;
		}
		else
		{
			cnt--;
		}
	}

	/*输出字符数组*/
	for(i = 0;i < cnt;i++)
	{
		putchar(*(arr+i));
	}
	putchar('\n');
	return 0;
}

```



### 2、用户输入一个字符并删除，输出数组。（指针法）

```c
用户输入一个字符并删除，输出数组。（指针法）
#include <stdio.h>

#define N 10
int main()
{
	char arr[N] = {'q','w','e','r','t','e','e','t','q','t'};
	int cnt = N;
	char ch = '\0';
	char *p = NULL;
	char *q = NULL;

	/*用户输入一个字符*/
	printf("Please input a char:\n");
	ch = getchar();

	/*删除ch*/
	for(p = arr,q=arr;p < arr + N;p++)
	{
		if(*p != ch)
		{
			*q = *p;
			q++;
		}
		else
		{
			cnt--;
		}
	}

	/*输出字符数组*/
	for(p = arr;p < arr + cnt;p++)
	{
		putchar(*p);
	}
	putchar('\n');
	return 0;
}

```



### 3、********mygets字符串输入函数********

```c
mygets字符串输入函数***
#include <stdio.h>
#include <string.h>

char *mygets(char *pout,int size)
{
	char *p = NULL;

	fgets(pout,size,stdin);

	p = pout + strlen(pout) - 1;

	if(*p == '\n')
	{
		*p = '\0';
	}
	else
	{
		while(getchar() != '\n')
		{
		}
	}

	return pout;
}

```



### 4、编写mygets函数输入字符串；

```c
编写mygets函数输入字符串；
#include <stdio.h>
#include <string.h>

char *mygets(char *pout,int size);
int main()
{
	char buf[20] = "";

	printf("Please input a string:\n");
	//scanf("%s",buf);
	//gets(buf)
	mygets(buf,20);

	printf("buf=%s\n",buf);
	return 0;
}

char *mygets(char *pout,int size)
{
	char *p = NULL;

	fgets(pout,size,stdin);

	p = pout + strlen(pout) - 1;

	if(*p == '\n')
	{
		*p = '\0';
	}
	else
	{
		while(getchar() != '\n')
		{
		}
	}

	return pout;
}

```



### 5、尝试直接调用mygets输入：

```c
尝试直接调用mygets输入：
#include <stdio.h>

char *mygets(char *pout,int size);
int main()
{
	char firstname[20] = "";
	char lastname[20] = "";

	printf("Please input your first name:\n");
	mygets(firstname,20);

	printf("Please input your last name:\n");
	mygets(lastname,20);

	printf("Your name is %s %s\n",lastname,firstname);
	return 0;
}

```



### 6、strcpy函数的过程解析

```c
strcpy函数的过程解析
#include <stdio.h>

int my_strcpy1(char inbuf[],char outbuf[]);
char * my_strcpy2(char *pdest,char *psrc);
char * my_strncpy(char *pdest,char *psrc,int n);
int main()
{
	char str1[] = "ahsdfhgsadh";
	char str2[20] = "";


	my_strncpy(str2,str1,15);

	printf("The str2 is %s\n",str2);
	return 0;
}

int my_strcpy1(char inbuf[],char outbuf[])
{
	int i = 0;

	while(inbuf[i] != '\0')
	{
		outbuf[i] = inbuf[i];
		i++;
	}
	outbuf[i] = inbuf[i];//copy '\0'

	return i+1;
}

char * my_strcpy2(char *pdest,char *psrc)
{
	char *p = psrc;
	char *q = pdest;

	while(*p != '\0')
	{
		*q = *p;
		p++;
		q++;
	}
	*q = *p;
	return pdest;
}

char * my_strncpy(char *pdest,char *psrc,int n)
{
	char *p = psrc;
	char *q = pdest;
	int cnt = 0;

	while(*p != '\0')
	{
		if(cnt >= n)
		{
			break;
		}
		*q = *p;
		p++;
		q++;
		cnt++;
	}

	while(cnt < n)
	{
		*q = '\0';
		q++;
		cnt++;
	}

	return pdest;
}

```



### 7、strcmp函数的过程解析

```c
strcmp函数的过程解析
#include <stdio.h>

int my_strcmp(char *pstr1,char *pstr2);
int main()
{
	char *p1 = "abc";
	char *p2 = "abc";
	int ret = 0;

	ret = my_strcmp(p1,p2);
	if(ret > 0)
	{
		printf("The max string is %s\n",p1);
	}
	else if(ret < 0)
	{
		printf("The max string is %s\n",p2);
	}
	else
	{
		printf("%s == %s\n",p1,p2);
	}

	return 0;
}

int my_strcmp(char *pstr1,char *pstr2)
{
	int i = 0;

	while(*(pstr1+i) == *(pstr2+i) && *(pstr1+i) != '\0' && *(pstr2+i) != '\0')
	{
		i++;
	}

	return *(pstr1+i) - *(pstr2+i);
}

```



### 8、strchr函数过程的解析

```c
strchr函数过程的解析
#include <stdio.h>

char input_char();
int my_strchr1(char buf[],char c);
char * my_strchr2(char *pstr,int c);
int main()
{
	char str[] = "asgdfgahsfha";
	char ch = input_char();
	char *pret = my_strchr2(str,ch);
	
	if(pret == NULL)
	{
		printf("%c is not in %s\n",ch,str);
	}
	else
	{
		printf("%c is in %s at %ld\n",ch,str,pret - str);
	}

	return 0;
}

int my_strchr1(char buf[],char c)
{
	int i = 0;

	while(buf[i] != '\0')
	{
		if(c == buf[i])
		{
			break;
		}

		i++;
	}
	if(buf[i] == '\0')
	{
		return -1;
	}
	else
	{
		return i;
	}
}

char * my_strchr2(char *pstr,int c)
{
	char *p= pstr;
	
	while(*p != '\0')
	{
		if(*p == c)
		{
			break;
		}
		p++;
	}

	if(*p == '\0')
	{
		return NULL;
	}
	else
	{
		return p;
	}
}

char input_char()
{
	char x = '\0';

	printf("Please input a char:\n");
	x = getchar();

	while(getchar() != '\n')
	{
	}

	return x;
}

```

### 9、strcasecmp、strcpm 字符串比较函数（本体判断国家是否是中国）

```c
strcasecmp、strcpm 字符串比较函数（本体判断国家是否是中国）
#include <stdio.h>
#include <string.h>

char *mygets(char *pout,int size);
#define COUTRY_NAME_LEN 20
int main()
{
	char coutry[COUTRY_NAME_LEN] = "";

	printf("Please input your country name:\n");
	mygets(coutry,COUTRY_NAME_LEN);

	if(strcasecmp(coutry,"China") != 0) //比较字符串内容
	//if(coutry != "China")//比较两个地址值，不符合本题
	{
		printf("We come from different country\n");
	}
	else
	{
		printf("We are from China\n");
	}
	return 0;
}

```



### 10、strcat、字符串连接（本题连接姓-名）

```c
strcat、字符串连接（本题连接姓-名）
#include <stdio.h>
#include <string.h>

#define FIRST_NAME_LEN 20
#define LAST_NAME_LEN 20

char *mygets(char *pout,int size);
int main()
{
	char first_name[FIRST_NAME_LEN] = "";
	char last_name[LAST_NAME_LEN] = "";
	char all_name[FIRST_NAME_LEN + LAST_NAME_LEN + 1] = "";

	printf("Please input your first name:\n");
	mygets(first_name,FIRST_NAME_LEN);

	printf("Please input your last name:\n");
	mygets(last_name,LAST_NAME_LEN);


	strcpy(all_name,last_name);
	strcat(all_name," ");
	strcat(all_name,first_name);

	printf("Your name is %s\n",all_name);
	return 0;
}

```



### 11、strstr字符串搜索（子串、母串）

```c

strstr字符串搜索（子串、母串）
#include <stdio.h>
#include <string.h>


char *mygets(char *pout,int size);
int input_string(char *pout,int cnt);
char input_char();

#define STR1_LEN 40
#define STR2_LEN 16
int main()
{
	char str1[STR1_LEN] = "";
	char str2[STR2_LEN] = "";
	char ch = '\0';
	char *pret = NULL;
	char *pc = NULL;

	input_string(str1,STR1_LEN);
	input_string(str2,STR2_LEN);
	ch = input_char();

	pret = strstr(str1,str2);
	if(NULL == pret)
	{
		printf("%s is not in %s\n",str2,str1);
		return 1;
	}
	else
	{
		pc = strchr(pret,ch);
		if(NULL == pc)
		{
			printf("Not find %c\n",ch);
		}
		else
		{
			printf("Address of %c is %p\n",ch,pc);
		}
	}


	return 0;
}

char input_char()
{
	char x = '\0';

	printf("Please input a char:\n");
	x = getchar();

	while(getchar() != '\n')
	{
	}

	return x;
}

int input_string(char *pout,int cnt)
{
	printf("Please input a string:\n");
	mygets(pout,cnt);

	return 0;
}

```

### 12、sscanf 字符串扫描函数

```c
sscanf 字符串扫描函数
#include <stdio.h>
#include <string.h>

int main()
{
	/*
	char buf[] = "12#34*56";
	int x = 0;
	int y = 0;
	int z = 0;

	sscanf(buf,"%d#%d*%d",&x,&y,&z);

	printf("x=%d,y=%d,z=%d\n",x,y,z);
	*/

	/*
	char buf[] = "Zhang 	\nSan";
	char xing[20] = "";
	char ming[20] = "";

	sscanf(buf,"%s%s",xing,ming);
	printf("xing is %s,ming is %s\n",xing,ming);
	*/
	
	char buf[] = "Zhang#San";
	char xing[20] = "";
	char ming[20] = "";

	//sscanf(buf,"%s%s",xing,ming); //No OK
	//sscanf(buf,"%s#%s",xing,ming); //No OK
	
	{
		char *p = NULL;

		p = strchr(buf,'#');
		strncpy(xing,buf,p - buf);

		p++;
		strcpy(ming,p);
	}

	printf("xing is %s,ming is %s\n",xing,ming);
	return 0;
}

```

### 13、sprintf 扫描输出函数

```c
sprintf 扫描输出函数
#include <stdio.h>

int main()
{
	char ch = 'M';
	int x = 84;
	float f = 1.8;
	char str[] = "Laobai";
	char out[20] = ""; 
	
	sprintf(out,"%s %c %d %.1f",str,ch,x,f);

	printf("out=%s\n",out);
	return 0;
}

```

### 14、sscanf、sprintf函数使用示例

```c
sscanf、sprintf函数使用示例
#include <stdio.h>
#include <string.h>

int main()
{
	char buf[] = "LaoTe@70@F";
       	char out[12] = "";	
	char name[8] = "";
	char sex = '\0';
	int age = '0';

	char *p = NULL;

	p = strchr(buf,'@');//p---->第一个@
	strncpy(name,buf,p-buf);

	p++;//p------->'7'
	sscanf(p,"%d",&age);

	p = strchr(p,'@');//p---->第二个@
	p++;//p------->F

	sex = *p;

	age+=2;
	sex = 'M';

	sprintf(out,"%s#%d#%c",name,age,sex);
	
	printf("out=%s\n",out);

	return 0;
}
```

### 15、每个单词首字符改为大写

```c
每个单词首字符改为大写
#include <stdio.h>

int input_string(char *pstr,int cnt);
char *mygets(char *pout,int size);
char *change_to_upper(char *pstr);

#define STR_LEN 40
int main()
{
	char buf[STR_LEN] = "";

	input_string(buf,STR_LEN);

	change_to_upper(buf);

	printf("buf=%s\n",buf);
	return 0;
}

int input_string(char *pstr,int cnt)
{
	printf("Please input a string:\n");
	mygets(pstr,cnt);

	return 0;
}

char *change_to_upper(char *pstr)
{
	char *p = NULL;

	p = pstr;
	while(*p != '\0')
	{
		/*跳过空格*/
		while(*p == ' ')
		{
			p++;
		}

		/*检查是否到达尾部*/
		if(*p == '\0')
		{
			break;
		}

		/*修改单词第一字母*/
		if(*p >= 'a' && *p <= 'z')
		{
			*p = *p - ('a' - 'A');
		}

		/*跳过本单词后面的字符直到遇到空格或'\0'*/
		while(*p != ' ' && *p != '\0')
		{
			p++;
		}
	}

	return pstr;
}

```



### 16、统计单词数

```c
统计单词数
#include <stdio.h>

int input_string(char *pstr,int cnt);
char *mygets(char *pout,int size);
int get_word_number(char *pstr);

#define STR_LEN 40
int main()
{
	char buf[STR_LEN] = "";

	input_string(buf,STR_LEN);


	printf("The number of words=%d\n",get_word_number(buf));
	return 0;
}

int input_string(char *pstr,int cnt)
{
	printf("Please input a string:\n");
	mygets(pstr,cnt);

	return 0;
}

int get_word_number(char *pstr)
{
	int cnt = 0;
	char *p = NULL;

	p = pstr;
	while(*p != '\0')
	{
		/*跳过空格*/
		while(*p == ' ')
		{
			p++;
		}

		/*检查是否到达尾部*/
		if(*p == '\0')
		{
			break;
		}

		/*修改单词第一字母*/
		cnt++;

		/*跳过本单词后面的字符直到遇到空格或'\0'*/
		while(*p != ' ' && *p != '\0')
		{
			p++;
		}
	}

	return cnt;
}

```



### 17、删除字符串中指定的字符

```c
删除字符串中指定的字符
#include <stdio.h>

int input_string(char *pstr,int cnt);
char *mygets(char *pout,int size);
char input_char();
int del_char(char *pstr,char c);

#define STR_LEN 40
int main()
{
	char buf[STR_LEN] = "";
	char ch = '\0';

	input_string(buf,STR_LEN);

	ch = input_char();

	del_char(buf,ch);

	printf("buf=%s\n",buf);
	return 0;
}

char input_char()
{
	char x = '\0';

	printf("Please input a char\n");
	x = getchar();

	while(getchar() != '\n')
	{
	}

	return x;
}

int input_string(char *pstr,int cnt)
{
	printf("Please input a string:\n");
	mygets(pstr,cnt);

	return 0;
}

int del_char(char *pstr,char c)
{
	char *p = NULL;
	char *q = NULL;
	int cnt = 0;

	p = q = pstr;

	while(*p != '\0')
	{
		if(*p == c)
		{
			cnt++;		
		}
		else
		{
			*q = *p;
			q++;
		}
		p++;
	}
	*q=*p;//'\0'

	return cnt;
}

```



### 18、输出字符串中的工资，及平均工资

```c
输出字符串中的工资，及平均工资
#include <stdio.h>
#include <string.h>

int get_worker_salary(char *pstr,int *psalary,int cnt);
char *get_one_money(char *pstr,int *salary);
int get_sum(int *pi,int cnt);
int print_salary(int *pi,int cnt);

int main()
{
	char buf[] = "lisi$2000#Zhangsan$3000#wangwu$3200#zhaoda$3600";
	int arr[4] = {0};

	get_worker_salary(buf,arr,4);

	print_salary(arr,4);


	printf("The ave of salary is %.2f\n",(float)get_sum(arr,4)/4);
	return 0;
}

int get_worker_salary(char *pstr,int *psalary,int cnt)
{
	int i = 0;
	char *pret =  NULL;

	pret = get_one_money(pstr,psalary+i);
	while(pret != NULL && i < cnt)
	{
		i++;
		pret = get_one_money(pret,psalary+i);
	}

	return 0;
}

char *get_one_money(char *pstr,int *salary)
{
	char *p = NULL;

	p = strchr(pstr,'$');
	p++;

	sscanf(p,"%d",salary);

	p = strchr(p,'#');
	if(p == NULL)
	{
		return NULL;
	}
	else
	{
		p++;//跳过‘#’
		return p;
	}
}

int get_sum(int *pi,int cnt)
{
	int sum = 0;
	int *pt = NULL;

	for(pt = pi;pt < pi + cnt;pt++)
	{
		sum+=*pt;
	}

	return sum;
}

int print_salary(int *pi,int cnt)
{
	int *p = NULL;

	for(p = pi;p < pi + cnt;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');

	return 0;
}

```



### 19、强制更改指针类型

```c
强制更改指针类型
#include <stdio.h>

int main()
{
	/*
	unsigned int x = 0x12345678;
	unsigned short *pus = (unsigned short *)&x;

	printf("*pus = 0x%x\n",*pus);
	printf("*(pus+1) = 0x%x\n",*(pus+1));
	
	printf("x = 0x%x\n",x);
	*/

	unsigned short s = 0x1234;
	unsigned int *pui = (unsigned int *)&s;

	printf("*pui=0x%x\n",*pui);//越界两个字节
	return 0;
}

```



## 三、二级指针

### 1、二级指针

```c
二级指针
#include <stdio.h>

/*
 * argc:argument count
 * argv:argument value
 *
 * argv是一个二级指针，其一级指向空间中存放着（argc+1）个char *类型的元素，最后元素空间存放的地址值为NULL，
 *     因此，argv一级指向空间是一个char *类型的数组，该数组以NULL作为结束标记
 * */
int main(int argc,char *argv[])
{
	/*
	char **pp = NULL;

	pp = argv;
	while(*pp != NULL)
	{
		printf("argv[%ld] = %s\n",pp-argv,*pp);
		pp++;
	}
	*/
	
	int i = 0;
	for(i = 0;i < argc;i++)
	{
		printf("argv[%d] = %s\n",i,argv[i]);
	}
	
	
	printf("argc = %d\n",argc);
	return 0;
}

```



### 2、二级指针输出最大的数组

```c
二级指针输出最大的数组
#include <stdio.h>

#define N 4

#define M 3

int get_sum(int *pi,int cnt);
int get_max_array(int *paddr[],int cnt);
int print_array(int *pi,int cnt);
int main()
{
	int arr1[N] = {1,2,3,4};
	int arr2[N] = {5,6,7,8};
	int arr3[N] = {3,4,5,6};
	
	int *addrarr[M] = {arr1,arr2,arr3};

	int ret = get_max_array(addrarr,M);

	print_array(addrarr[ret],N);
	
	return 0;
}

int print_array(int *pi,int cnt)
{
	int *p = NULL;

	for(p = pi;p < pi + cnt;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');
	return 0;
}

int get_max_array(int *paddr[],int cnt)
//int get_max_array(int** paddr,int cnt)
{
	int max = 0;
	/*	
	int i = 0;
	for(i = 1;i < cnt;i++)
	{
		if(get_sum(paddr[max],N) < get_sum(paddr[i],N))
		{
			max = i;
		}
	}
	*/
	int **pp = NULL;

	for(pp = paddr+1;pp < paddr + cnt;pp++)
	{
		if(get_sum(*pp,N) > get_sum(*(paddr+max),N))
		{
			max = pp - paddr;
		}
	}

	return max;
}

int get_sum(int *pi,int cnt)
{
	int sum = 0;
	int *p = NULL;

	for(p = pi;p < pi + cnt;p++)
	{
		sum += *p;
	}

	return sum;
}

```



### 3、二级指针姓名排序

```c
二级指针姓名排序
#include <stdio.h>
#include <string.h>

#define N 5
int print_names(char **ppnames,int cnt);
int sort_names(char **ppnames,int cnt);
int main()
{
	char *name_arr[5] = {"ruhua","siyu","cengyu","luoyan","biyue"};

	sort_names(name_arr,5);

	print_names(name_arr,5);
	return 0;
}

int sort_names(char **ppnames,int cnt)
{
	int i = 0;
	char * pt = NULL;
	/*
	int j = 0;
	for(i = 0;i < cnt;i++)
	{
		for(j = 0;j < cnt - i - 1;j++)
		{
			if(strcmp(ppnames[j],ppnames[j+1]) > 0)
			{
				pt = ppnames[j];
				ppnames[j] = ppnames[j+1];
				ppnames[j+1] = pt;
			}
		}
	}
	*/
	char **pp = NULL;
	for(i = 0;i < cnt;i++)
	{
		for(pp = ppnames;pp < ppnames+cnt - i - 1;pp++)
		{
			if(strcmp(*pp,*(pp+1)) > 0)
			{
				pt = *pp;
				*pp = *(pp+1);
				*(pp+1) = pt;
			}
		}
	}

	return 0;
}

int print_names(char **ppnames,int cnt)
{
	/*
	int i = 0;

	for(i = 0;i < cnt;i++)
	{
		printf("%s\n",ppnames[i]);
	}
	*/
	char **pp = NULL;

	for(pp = ppnames;pp < ppnames + cnt;pp++)
	{
		printf("%s\n",*pp);
	}

	return 0;
}

```



## 四、main函数传参，以及malloc动态分配内存

### 1、main函数参数argc的使用

```c
main函数参数argc的使用
#include <stdio.h>

int main(int argc,char *argv[])
{
	float l = 0.0f;
	float w = 0.0f;

	if(argc < 3)
	{
		printf("The argument is too few\n");
		printf("Usage:./garea len width\n");
		return 1;
	}

	sscanf(argv[1],"%f",&l);
	sscanf(argv[2],"%f",&w);

	printf("The area of rectangle is %.2f\n",l*w);

	return 0;
}

```



### 2、最大公因数最小公倍数通过main 的参数传入

```c
最大公因数最小公倍数通过main 的参数传入
#include <stdio.h>

int get_lcm(int x,int y);
int get_gcd(int x,int y);

int main(int argc,char *argv[])
{
	int n1 = 0;
	int n2 = 0;

	if(argc < 3)
	{
		printf("The argument is too few,Usage:./gcdlcm num1 num2\n");
		return 1;
	}

	sscanf(argv[1],"%d",&n1);
	sscanf(argv[2],"%d",&n2);


	if(n1 < 1 || n2 < 1)
	{
		printf("Your input number is not natrue-number\n");
		return 2;
	}

	printf("GCD of %d and %d is %d\n",get_gcd(n1,n2),n1,n2);
	printf("LCM of %d and %d is %d\n",get_lcm(n1,n2),n1,n2);
	return 0;
}

int get_gcd(int x,int y)
{
	int t = 0;

	t = x % y;
	while(t != 0)
	{
		x = y;
		y = t;
		t = x % y;
	}

	return y;
}

int get_lcm(int x,int y)
{
	int t = 0;

	if(x < y)
	{
		t = x;
		x = y;
		y = t;
	}

	for(t = 1;t <= y;t++)
	{
		if((t * x) % y == 0)
		{
			break;
		}
	}

	return t*x;
}


```



### 3、动态分配内存，选择排序

```c
动态分配内存，选择排序
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int input_number();
int select_sort(int *pint,int num);
int print_sort(int *pint,int num);
int main(int argc,char *argv[])
{
	int cnt = input_number();
	int *pi = NULL;
	int i = 0;

	if(cnt <= 0)
	{
		printf("Your input is invalid\n");
		return 1;
	}

	pi = (int *)malloc(cnt * sizeof(int));
	if(NULL == pi)
	{
		printf("Malloc failed\n");
		return 2;
	}
	
	srand(time(NULL));

	for(i = 0;i < cnt;i++)
	{
		*(pi + i) = rand() % 1000;
	}
        

	select_sort(pi,cnt);
	print_sort(pi,cnt);
	
	free(pi);
	pi = NULL;

	//........
	return 0;
}
int print_sort(int *pint,int num)
{
	int *p = NULL;

	for(p = pint;p < pint + num;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');

	return 0;
}

int select_sort(int *pint,int num)
{
	int i = 0;
	int j = 0;
	int min = 0;
	int t = 0;

	for(i = 0;i < num;i++)
	{
		min = i;
		for(j = i + 1;j < num;j++)
		{
			if(*(pint + j) < *(pint + min))
			{
				min = j;
			}
		}

		if(min != i)
		{
			t = *(pint + i);
			*(pint + i) = *(pint + min);
			*(pint + min) = t;
		}
	}

	return 0;
}

int input_number()
{
	int n = 0;

	printf("Please input a number:\n");
	scanf("%d",&n);

	while(getchar() != '\n')
	{
	}

	return n;
}

```



### 4、输入金额计算人民币最少张数（钱，纸币）

```c
输入金额计算人民币最少张数
#include <stdio.h>

int count_pieces(int m,int *pret,int cnt);
int print_int_arr(int *pi,int cnt);
int main(int argc,char *argv[])
{
	int money = 0;
	int rmb[7] = {0};

	if(argc < 2)
	{
		printf("The argument is too few,Usage:./money 10000\n");
		return 1;
	}

	sscanf(argv[1],"%d",&money);

	count_pieces(money,rmb,7);
	print_int_arr(rmb,7);

	return 0;
}

int print_int_arr(int *pi,int cnt)
{
	int *p = pi;

	printf("%6d%6d%6d%6d%6d%6d%6d\n",100,50,20,10,5,2,1);
	for(;p < pi + cnt;p++)
	{
		printf("%6d",*p);
	}
	putchar('\n');

	return 0;
}

int count_pieces(int m,int *pret,int cnt)
{
	int rmb_arr[7] = {100,50,20,10,5,2,1};
	int *p = NULL;

	if(cnt < 7)
	{
		printf("Input param is invalid\n");
		return -1;
	}
	
	for(p = rmb_arr;p < rmb_arr+7;p++)
	{
		*(pret + (p - rmb_arr))=m / *p;
		m = m % *p;
	}

	return 0;
}

```



### 5、统计元音字母的个数(memset)

```c
统计元音字母的个数(memset)
//刚刚动态分配出来的内存内容是不确定的，野值
//此处是为了将每个字节的每个二进制位置为0
#include <stdio.h>

int count_aeiou(char *pstr,int *pret,int cnt);
int print_int_arr(int *pi,int cnt);
int main(int argc,char *argv[])
{
	int retarr[5] = {0};

	if(argc < 2)
	{
		printf("The argument is too few,Usage:./aeiou  sadjgfhasgh\n");
		return 1;
	}

	count_aeiou(argv[1],retarr,5);

	print_int_arr(retarr,5);

	return 0;
}

int print_int_arr(int *pi,int cnt)
{
	int *p = pi;

	for(;p < pi + cnt;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');

	return 0;
}

int count_aeiou(char *pstr,int *pret,int cnt)
{
	char *p = pstr;
	int *pi = NULL;;

	if(cnt < 5)
	{
		printf("Input param is invalid\n");
		return -1;
	}

	/*
	for(pi = pret;pi < pret + cnt;pi++)
	{
		*pi = 0;
	}
	*/
	memset(pret,0x00,cnt * sizeof(int));//void *memset(void *s,int c,size_t n); 

	while(*p != '\0')
	{
		switch(*p)
		{
			case 'a':
			case 'A':
				(*pret)++;
				break;
			case 'e':
			case 'E':
				(*(pret+1))++;
				break;
			case 'i':
			case 'I':
				(*(pret+2))++;
				break;
			case 'o':
			case 'O':
				(*(pret+3))++;
				break;
			case 'u':
			case 'U':
				(*(pret+4))++;
				break;
			default:
				break;
		}
		p++;
	}

	return 0;
}

```

### 6、拷贝将src指向空间开始的连续n个字节拷贝到dest指向空间的同样位置（memcpy）

```c
拷贝将src指向空间开始的连续n个字节拷贝到dest指向空间的同样位置（memcpy）
#include <stdio.h>
#include <string.h>

int main(int argc,char *argv[])
{
	float arr1[5] = {1.2,3.4,5.6,7.8,9.9};
	float arr2[5] = {0.0f};

	/*
	{
		float *pf = NULL;

		for(pf = arr1;pf < arr1 + 5;pf++)
		{
			*(arr2 + (pf - arr1))=*pf;
		}
	}
	*/

	memcpy(arr2,arr1,5 * sizeof(float));

	{
		float *pf = NULL;
		for(pf = arr2;pf < arr2 + 5;pf++)
		{
			printf("%.1f ",*pf);
		}
		putchar('\n');
	}
	return 0;
}

```

### 7、通过main函数传参n，随机产生n个数字，删除两个最大值和两个最小值（动态分配内存空间【函数形式分配并释放】）

```c
通过main函数传参n，随机产生n个数字，删除两个最大值和两个最小值（动态分配内存空间【函数形式分配并释放】）
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include <time.h>

int delete_min(int *pi,int cnt);
int delete_max(int *pi,int cnt);
int print_int_arr(int *pi,int cnt);

int *create_num_rand(int n);
int destroy_num_rand(int *pi);

int main(int argc,char *argv[])
{
	int num = 0;
	int *pnum = NULL;

	if(argc < 2)
	{
		printf("The argument is too few,Usage:./dmm 16:\n");
		return 1;
	}
	
	sscanf(argv[1],"%d",&num);
	
	srand(time(NULL));

	pnum = create_num_rand(num);

	printf("Before Delete:\n");
	print_int_arr(pnum,num);

	num = delete_min(pnum,num);
	num = delete_min(pnum,num);
	num = delete_max(pnum,num);
	num = delete_max(pnum,num);
	
	printf("After Delete:\n");
	print_int_arr(pnum,num);
	
	destroy_num_rand(pnum);
	pnum = NULL;
	return 0;
}

int *create_num_rand(int n)
{
	int *pnum = NULL;
	int *pt = NULL;

	if(n <= 0)
	{
		printf("Input param is invalid\n");
		return NULL;
	}

	pnum = (int *)malloc(n * sizeof(int));
	if(NULL == pnum)
	{
		printf("Malloc failed\n");
		return NULL;
	}
	memset(pnum,0,n * sizeof(int));


	for(pt = pnum;pt < pnum + n;pt++)
	{
		*pt = rand() % 100;
	}

	return pnum;
}

int destroy_num_rand(int *pi)
{
	free(pi);
	pi = NULL;

	return 0;
}

int print_int_arr(int *pi,int cnt)
{
	int *p = pi;

	for(;p < pi + cnt;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');

	return 0;
}

int delete_max(int *pi,int cnt)
{
	int max = 0;
	int *p = NULL;

	for(p = pi + 1;p < pi + cnt;p++)
	{
		if(*p > *(pi + max))
		{
			max = p - pi;
		}
	}

	for(p = pi + max + 1;p < pi + cnt;p++)
	{
		*(p-1) = *p;
	}
	
	return cnt-1;
}

int delete_min(int *pi,int cnt)
{
	int min = 0;
	int *p = NULL;

	for(p = pi + 1;p < pi + cnt;p++)
	{
		if(*p < *(pi + min))
		{
			min = p - pi;
		}
	}

	for(p = pi + min + 1;p < pi + cnt;p++)
	{
		*(p-1) = *p;
	}
	
	return cnt-1;
}

```



### 8、main函数传参m k 输出m后k个素数，并打印！（动态分配内存空间【函数形式】）

```c
main函数传参m k 输出m后k个素数，并打印！（动态分配内存空间【函数形式】）
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int is_prime(int x);
int print_prime(int *pout,int cnt);
int get_prime1(int vm,int *pout,int vk);
int * get_prime2(int vm,int vk);
int main(int argc,char *argv[])
{
	int m = 0;
	int k = 0;
	int *pret = NULL;

	if(argc < 3)
	{
		printf("The argument is too few,Usage:./prime 19  20\n");
		return 1;
	}

	sscanf(argv[1],"%d",&m);
	sscanf(argv[2],"%d",&k);

	/*
	pret = (int *)malloc(k * sizeof(int));
	if(NULL == pret)
	{
		printf("Malloc failed\n");
		return 2;
	}

	get_prime1(m,pret,k); //形参作为函数返回值
	*/

	pret = get_prime2(m,k);

	print_prime(pret,k);
	
	free(pret);
	pret = NULL;

	return 0;
}

int is_prime(int x);
int get_prime1(int vm,int *pout,int vk)
{
	int i = 0;

	vm++;

	while(i < vk)
	{
		if(is_prime(vm))
		{
			*(pout + i) = vm;
			i++;
		}
		vm++;
	}
	
	return 0;
}

int * get_prime2(int vm,int vk)
{
	int i = 0;
	int *pout = NULL;

	pout = (int *)malloc(vk * sizeof(int));
	if(NULL == pout)
	{
		printf("Malloc failed\n");
		return NULL;
	}
	memset(pout,0,vk*sizeof(int));

	vm++;

	while(i < vk)
	{
		if(is_prime(vm))
		{
			*(pout + i) = vm;
			i++;
		}
		vm++;
	}
	
	return pout;
}

int print_prime(int *pout,int cnt)
{
	int *p = pout;

	for(;p < pout + cnt;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');

	return 0;
}

int is_prime(int x)
{
	int i = 0;

	for(i = 2;i < x;i++)
	{
		if(x % i == 0)
		{
			break;
		}
	}

	if(i == x)
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

```



### 9、栈溢出情况

```c
栈溢出情况
#include <stdio.h>

int main(int argc,char *argv[])
{
	double arr[1024*1024] ={0};//栈溢出

	arr[0] = 1.0;

	printf("arr[0]=%f\n",arr[0]);
	return 0;
}

```





## 五、递归调用（函数自己调用自己）

### 1、回文（递归）

```c
回文（递归）
#include <stdio.h>

void my_print_string(char *pstr);
int main(int argc,char *argv[])
{
	my_print_string("Hello Wolrd");
	putchar('\n');
	return 0;
}

void my_print_string(char *pstr)
{
	if(*pstr == '\0')
	{
		return;
	}
	my_print_string(pstr+1);
	putchar(*pstr);
}

```



### 2、阶乘（递归）

```c
阶乘（递归）
#include <stdio.h>

int factor(int n);
int main(int argc,char *argv[])
{
	printf("4!=%d\n",factor(4));

	return 0;
}

int factor(int n)
{/*
	if(n <= 2)
	{
		return 2;
	}
*/
	return n * factor(n-1);
}

```



### 3、斐波那契数列（递归）

```c
斐波那契数列（递归）
#include <stdio.h>

int fib(int n);
int main(int argc,char *argv[])
{
	int x = 0;

	if(argc < 2)
	{
		printf("The argument is too few\n");
		return 1;
	}

	sscanf(argv[1],"%d",&x);

	printf("%d\n",fib(x));

	return 0;
}

int fib(int n)
{
	if(n == 1 || n == 2)
	{
		return 1;
	}

	return fib(n-1) + fib(n-2);
}

```



### 4、猴子吃桃（递归）

```c
猴子吃桃（递归）
#include <stdio.h>

int peach(int d);
int main(int argc,char *argv[])
{
	printf("The number of peach at first day is %d\n",peach(1));

	return 0;
}

int peach(int d)
{
	if(d == 10)
	{
		return 1;
	}

	return (peach(d+1) + 1) * 2;
}

```



### 5、二分法查找（折半）（递归）

```c
二分法查找（折半）（递归）
#include <stdio.h>

#define N 8

int half_search(int *pi,int low,int high,int key);
int main()
{
	int arr[N] = {2,4,6,8,10,12,14,16};
	int num = 0;
	int ret = 0;

	printf("Please input a number:\n");
	scanf("%d",&num);

	ret = half_search(arr,0,N-1,num);
	
	if(ret < 0)
	{
		printf("Not found\n");
	}
	else
	{
		printf("%d is at %d\n",num,ret);
	}

	return 0;
}

int half_search(int *pi,int low,int high,int key)
{
	int mid = 0;

	if(low > high)
	{
		return -1;
	}

	mid = (low + high) / 2;
	if(*(pi + mid) == key)
	{
		return mid;
	}
	else if(*(pi + mid) > key)
	{
		return half_search(pi,low,mid-1,key);
	}
	else
	{
		return half_search(pi,mid+1,high,key);
	}

}

```



### 6、生兔子问题（递归）

```c
生兔子问题（递归）
#include <stdio.h>

int fib(int n);
int main(int argc,char *argv[])
{
	int x = 0;

	if(argc < 2)
	{
		printf("The argument is too few\n");
		return 1;
	}

	sscanf(argv[1],"%d",&x);

	printf("The n month have %d rabits\n",fib(x));

	return 0;
}

int fib(int n)
{
	if(n == 1 || n == 2)
	{
		return 1;
	}

	return fib(n-1) + fib(n-2);
}

```



### 7、汉诺塔问题（递归）

```c
汉诺塔问题（递归）
#include <stdio.h>

void hanoi(int n,char a,char b,char c);
int main(int argc,char *argv[])
{
	hanoi(3,'A','B','C');

	return 0;
}

/*
 * a:起始柱
 * b:中转柱
 * c:目标柱
 *
 * */
void hanoi(int n,char a,char b,char c)
{
	if(n == 1)
	{
		printf("%c  ------>   %c\n",a,c);
	}
	else
	{
		hanoi(n-1,a,c,b);
		printf("%c  ------>   %c\n",a,c);
		hanoi(n-1,b,a,c);
	}
}

```





# ***结构体

一、

### 1、结构体设计初识，结构体输入输出

```c
结构体设计初识，结构体输入输出
#include <stdio.h>

#define NAME_LEN 20
struct date
{
	int y;
	int m;
	int d;
};

struct stu
{
	char name[NAME_LEN];
	char sex;
	float score;
	struct date birth;
};

char *mygets(char *pout,int size);
int main(int argc,char *argv[])
{
	struct stu st = {""};

	printf("Please input your name:\n");
	mygets(st.name,NAME_LEN);

	printf("Please input your sex:\n");
	st.sex = getchar();
	
	printf("Please input your score:\n");
	scanf("%f",&st.score);

	printf("Please input your birthday:2000 10 9\n");
	scanf("%d%d%d",&st.birth.y,&st.birth.m,&st.birth.d);


	printf("Your information:\n");
	printf("Name:%s Sex:%c Score:%.1f Birth:%d-%d-%d\n",
			st.name,
			st.sex,
			st.score,
			st.birth.y,
			st.birth.m,
			st.birth.d
	      );

	return 0;
}

```

### 2、结构体打印坐标轴；

```c
结构体打印坐标轴；

#include <stdio.h>

struct pointer
{
	float x;
	float y;
};

int main(int argc,char *argv[])
{
	struct pointer pt = {0.0f};

	printf("Please input x and y:\n");
	scanf("%f%f",&pt.x,&pt.y);

	if(pt.x == 0 && pt.y == 0)
	{
		printf("It is (0,0)\n");
	}
	else if(pt.x == 0 && pt.y != 0)
	{
		printf("It is at y-axle\n");
	}
	else if(pt.x != 0 && pt.y == 0)
	{
		printf("It is at x-axle\n");
	}
	else
	{
		if(pt.x > 0 && pt.y > 0)
		{
			printf("It is at the first quadrant\n");
		}
		else if(pt.x < 0 && pt.y > 0)
		{
			printf("It is at the second quadrant\n");
		}
		else if(pt.x < 0 && pt.y < 0)
		{
			printf("It is at the third quadrant\n");
		}
		else
		{
			printf("It is at the fourth quadrant\n");
		}

	}

	return 0;
}

```



### 3、输入两个复数然后将相加为另外一个复数

```c
输入两个复数然后将相加为另外一个复数
#include <stdio.h>

struct my_complex
{
	double r;
	double v;
};

int main(int argc,char *argv[])
{
	struct my_complex t1 = {0.0};
	struct my_complex t2 = {0.0};
	struct my_complex t3 = {0.0};


	printf("Please input real-value and virtual-value:\n");
	scanf("%lf%lf",&t1.r,&t1.v);
	
	printf("Please input real-value and virtual-value:\n");
	scanf("%lf%lf",&t2.r,&t2.v);

	t3.r = t1.r + t2.r;
	t3.v = t1.v + t2.v;

	printf("After add,r-value=%.2f,v-value=%.2f\n",t3.r,t3.v);
	return 0;
}

```

### 4、10人投票，投给三个人,统计票数，并打印票数最多的人及票数（结构体数组）

```c
10人投票，投给三个人,统计票数，并打印票数最多的人及票数
#include <stdio.h>
#include <string.h>

#define NAME_LEN 20
#define N 3
struct candidate
{
	char name[NAME_LEN];
	int cnt;
};

char *mygets(char *pout,int size);//需要mygets函数自行调用
int main(int argc,char *argv[])
{
	struct candidate arr[N] = {{"zhangsan",0},{"lisi",0},{"wanger",0}};//结构体数组
	int i = 0;
	char buf[NAME_LEN] = "";
	struct candidate *pt = NULL;

	for(i = 0;i < 10;i++)
	{
		/*输入候选人姓名*/
		printf("Please input your candidate-name:\n");
		mygets(buf,NAME_LEN);

		/*用输入的人名在数组中查找相同名字的候选人，找到则对应选票+1，未找到则意味着放弃选举权 */
		for(pt = arr;pt < arr + N;pt++)
		{
			if(strcmp(pt->name,buf) == 0)   //字符串比较strcmp 
			{
				pt->cnt++;
			}
		}
	}

	/*输出三个候选人姓名和得票数*/
	for(pt = arr;pt < arr + N;pt++)
	{
		printf("%s:%d\n",pt->name,pt->cnt);
	}
	return 0;
}

```



### 5、main函数传参n，动态分配内存，随机产生n个随机数，插入排序，后删除最小值并打印 （结构体指针）

```c
main函数传参n，随机产生n个随机数，插入排序，后删除最小值并打印 
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include <time.h>

struct rand
{
	int cnt;
	int *prands;           //结构体指针
};

int insert_sort(int *pint,int num);
int delete(int *pint,int num,int loc);
int print_arr(int *pint,int num);
int main(int argc,char *argv[])
{
	struct rand myrands = {0};
	struct rand *pt = &myrands;
	int count = 0;
	int *pi = NULL;

	if(argc < 2)
	{
		printf("The argument is too few\n");
		return 1;
	}

	sscanf(argv[1],"%d",&count);
	if(count <= 0)
	{
		printf("The param is invalid\n");
		return 2;
	}

	//myrands.cnt = count;
	pt->cnt = count;

	srand(time(NULL));

	//myrands.prands = (int *)malloc(myrands.cnt * sizeof(int));
	pt->prands = (int *)malloc(pt->cnt * sizeof(int));
	//if(NULL == myrands.prands)
	if(NULL == pt->prands)
	{
		printf("Malloc failed\n");
		return 3;
	}
	//memset(myrands.prands,0,myrands.cnt * sizeof(int));
	memset(pt->prands,0,pt->cnt * sizeof(int));

	//for(pi = myrands.prands;pi < myrands.prands + myrands.cnt;pi++)
	for(pi = pt->prands;pi < pt->prands + pt->cnt;pi++)
	{
		*pi = rand() % 100;
	}

	//insert_sort(myrands.prands,myrands.cnt);
	insert_sort(pt->prands,pt->cnt);
	//myrands.cnt = delete(myrands.prands,myrands.cnt,0);
	pt->cnt = delete(pt->prands,pt->cnt,0);

	//print_arr(myrands.prands,myrands.cnt);
	print_arr(pt->prands,pt->cnt);

	//free(myrands.prands);
	free(pt->prands);
	//myrands.prands = NULL;
	pt->prands = NULL;
	return 0;
}

int print_arr(int *pint,int num)
{
	int *p = NULL;

	for(p = pint;p < pint + num;p++)
	{
		printf("%d ",*p);
	}
	putchar('\n');

	return 0;
}

int insert_sort(int *pint,int num)
{
	int i = 0;
	int j = 0;
	int t = 0;

	for(i = 1;i < num;i++)
	{
		t = *(pint + i);
		for(j = i-1;j >= 0;j--)
		{
			if(*(pint + j) > t)
			{
				*(pint + j + 1) = *(pint + j);
			}
			else
			{
				break;
			}
		}
		*(pint + j + 1) = t;
	}
	return 0;
}

int delete(int *pint,int num,int loc)
{
	int * p = NULL;

	if(loc < 0 || loc >= num)
	{
		printf("The param loc is invalid\n");
		return -1;
	}

	for(p = pint + loc + 1;p < pint + num;p++)
	{
		*(p-1) = *p;
	}

	return num-1;
}

```



### 6、输入两个复数然后将相加为另外一个复数【MF，四种方式】第三种最佳

````c
输入两个复数然后将相加为另外一个复数【MF，四种方式】第三种最佳
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct my_complex
{
	double r;
	double v;
};

struct my_complex add_complex(struct my_complex st1,struct my_complex st2);
struct my_complex add_complex2(struct my_complex *pst1,struct my_complex *pst2);
int add_complex3(struct my_complex *pst1,struct my_complex *pst2,struct my_complex *pout);
struct my_complex * add_complex4(struct my_complex *pst1,struct my_complex *pst2);
int main(int argc,char *argv[])
{
	struct my_complex t1 = {0.0};
	struct my_complex t2 = {0.0};

	printf("Please input real-value and virtual-value:\n");
	scanf("%lf%lf",&t1.r,&t1.v);
	
	printf("Please input real-value and virtual-value:\n");
	scanf("%lf%lf",&t2.r,&t2.v);

	/*
	传参和函数返回的效率均低
	{
		struct my_complex t3 = {0.0};
		t3 = add_complex1(t1,t2);
		printf("After add,r-value=%.2f,v-value=%.2f\n",t3.r,t3.v);
	}*/

	/*
	函数返回的效率低
	{
		struct my_complex t3 = {0.0};
		t3 = add_complex2(&t1,&t2);
		printf("After add,r-value=%.2f,v-value=%.2f\n",t3.r,t3.v);
	}*/

	
	{
		struct my_complex t3 = {0.0};
		add_complex3(&t1,&t2,&t3);
		printf("After add,r-value=%.2f,v-value=%.2f\n",t3.r,t3.v);
	}
	

	/*{
		struct my_complex *pret = NULL;
		pret = add_complex4(&t1,&t2);
		printf("After add,r-value=%.2f,v-value=%.2f\n",pret->r,pret->v);

		free(pret);//一旦不再使用pret指向空间，必须要对其进行free，否则会造成内存泄漏
		pret = NULL;
	}*/


	return 0;
}

struct my_complex add_complex1(struct my_complex st1,struct my_complex st2)
{
	struct my_complex st3 = {0.0};

	st3.r = st1.r + st2.r;
	st3.v = st1.v + st2.v;

	return st3;
}

struct my_complex add_complex2(struct my_complex *pst1,struct my_complex *pst2)
{
	struct my_complex st3 = {0.0};

	st3.r = pst1->r + pst2->r;
	st3.v = pst1->v + pst2->v;

	return st3;
}

int add_complex3(struct my_complex *pst1,struct my_complex *pst2,struct my_complex *pout)
{
	pout->r = pst1->r + pst2->r;
	pout->v = pst1->v + pst2->v;

	return 0;
}

struct my_complex * add_complex4(struct my_complex *pst1,struct my_complex *pst2)
{
	struct my_complex *pout = NULL;

	pout = (struct my_complex *)malloc(sizeof(struct my_complex));
	if(NULL == pout)
	{
		printf("Malloc Failed\n");
		return NULL;
	}
	memset(pout,0,sizeof(struct my_complex));

	pout->r = pst1->r + pst2->r;
	pout->v = pst1->v + pst2->v;

	return pout;	
}

````



### 7、找到 年龄最大的学生 并打印

```c
找到 年龄最大的学生 并打印
#include <stdio.h>

#define NAME_LEN  20
#define N  5
struct stu
{
	char name[NAME_LEN];
	int age;
};

int find_oldest_stu(struct stu *pstu,int cnt);
int main(int argc,char *argv[])
{
	struct stu arr[N] = {
				{"Ruhua",24},
				{"Siyu",26},
				{"Cengyu",22},
				{"Luoyan",23},
				{"Biyue",25},
			    };

	int ret = 0;

	ret = find_oldest_stu(arr,N);

	printf("The oldest stu name:%s,age:%d\n",(arr+ret)->name,(arr+ret)->age);
	return 0;
}

int find_oldest_stu(struct stu *pstu,int cnt)
{
	int old = 0;
	struct stu *pt = NULL;

	for(pt = pstu + 1;pt < pstu + cnt;pt++)
	{
		if(pt->age > (pstu+old)->age)
		{
			old = pt - pstu;
		}
	}

	return old;
}

```



## 日历改写struct版本：



### —–>  calendar.h头文件

```c
#ifndef CALENDAR_H
#define CALENDAR_H
/*1. 只能存放非执行语句*/
/*2. 存放多个.c共同用到的一些非执行语句*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct date
{
	int y;
	int m;
	int d;
};

int is_leap_year(struct date *pdate);
int get_month_days(struct date *pdate);
int is_valid_date(struct date *pdate);
int get_year_days(struct date *pdate);
int get_week(struct date *pdate);
int print_calendar(struct date *pdate);





#endif

```

### —-> mian.c 文件

```c
#include "calendar.h"

int input_year_and_month(struct date *pdate);
int main()
{
	struct date dt = {0,0,1};

	input_year_and_month(&dt);

	if(!is_valid_date(&dt))
	{
		printf("Your input error\n");
		return 1;
	}

	print_calendar(&dt);
	return 0;
}

int input_year_and_month(struct date *pdate)
{

	printf("Please input year:\n");
	scanf("%d",&pdate->y);
	while(getchar() != '\n')
	{
	}

	printf("Please input month:\n");
	scanf("%d",&pdate->m);
	while(getchar() != '\n')
	{
	}
	return 0;
}


```

### —-> date.c 文件

```c
#include "calendar.h"

int is_leap_year(struct date *pdate)
{
	if((pdate->y % 4 == 0 && pdate->y % 100 != 0) || (pdate->y % 400 == 0))
	{
		return 1;
	}
	else
	{
		return 0;
	}
}

int get_month_days(struct date *pdate)
{
	int ret = 0;
	switch(pdate->m)
	{
		case 1:
		case 3:
		case 5:
		case 7:
		case 8:
		case 10:
		case 12:
			ret = 31;
			break;
		case 4:
		case 6:
		case 9:
		case 11:
			ret = 30;
			break;
		case 2:
			if(is_leap_year(pdate))
			{
				ret = 29;
			}
			else
			{
				ret = 28;
			}
			break;
	}

	return ret;
}

int is_valid_date(struct date *pdate)
{
	int days = 0;
	if(pdate->m < 1 || pdate->m > 12)
	{
		return 0;
	}

	days = get_month_days(pdate);
	if(pdate->d < 1 || pdate->d > days)
	{
		return 0;
	}

	return 1;
}

int get_year_days(struct date *pdate)
{
	int i = 0;
	int ret = 0;
	struct date t = {0};

	t.y = pdate->y;
	t.d = 1;

	for(i = 1;i <= pdate->m-1;i++)
	{
		t.m = i;
		ret += get_month_days(&t);
	}

	return ret + pdate->d;
}

int get_week(struct date *pdate)
{
	int sum = 0;

	sum = (pdate->y-1) + 
	      (pdate->y-1)/4 - 
	      (pdate->y-1) / 100 + 
	      (pdate->y-1)/400 + 
	      get_year_days(pdate);

	return sum % 7;
}

```

### —-> calendar.c 文件

```c
#include "calendar.h"

int print_calendar(struct date *pdate)
{
	int days = get_month_days(pdate);
	int week = get_week(pdate);
	int sp = 0;
	int d = 0;

	printf("SUN MON TUE WED THU FRI SAT\n");
	/*打印空格---week * 4*/
	for(sp = 1;sp <= week * 4;sp++)
	{
		putchar(' ');
	}

	for(d = 1;d <= days;d++)
	{
		printf("%-4d",d);
		if((d+week) % 7 == 0)
		{
			putchar('\n');
		}
	}
	putchar('\n');

	return 0;
}

```

# ***数组指针和函数指针

## 数组指针

### 1、数组指针，求二维数组的所有元素的平均值

```c
数组指针，求二维数组的所有元素的平均值，【  (*arr)[N], arr[][N]  】
#include <stdio.h>

#define H 3
#define L 4
#define FUNC_VERSION
float get_ave(int tarr[][L],int hs);
int main(int argc,char *argv[])
{
	int arr[H][L] = {{1,2,3,4},
	                 {5,6,7,8},
			 {9,10,11,12}
	                };
	float ave = 0.0f;

#ifdef FUNC_VERSION
	ave = get_ave(arr,H);
#else
	int sum = 0;
	int i = 0;
	int (*parr)[L] = NULL;

	for(parr = arr;parr < arr+H;parr++)
	{
		for(i = 0;i < L;i++)
		{
			sum += *(*parr + i);
		}
	}

	ave = (float)sum / (H * L);
#endif

	printf("The ave is %.2f\n",ave);


	return 0;
}

/*
 * 二维数组作为函数形参类型时等价于指向一维数组的数组指针（将一整行（一维数组）看作是特殊元素）
 * 三维数组作为函数形参类型时等价于指向二维数组的数组指针（将一整层（二维数组）看作是特殊元素）
 * 。。。。。。。
 * N维数组作为函数形参类型时等价于指向N-1维数组的数组指针（将N-1维数组整体看作是特殊元素）
 *
 * N维数组作为函数形参类型时，第一维大小无需书写，写了不影响编译，但也没有任何实际的作用
 *                            其它维大小则都需书写，缺一不可
 * */
float get_ave(int tarr[][L],int hs)
{
	int (*parr)[L] = NULL;
	int sum  = 0;
	int i = 0;
	//int **pparr = tarr;  形参类型是int *tarr[]
	//int **ppparr = tarr;  形参类型是int **tarr[]
	//int (*parr)[3][4] = tarr;  形参类型是int tarr[][3][4]

	for(parr = tarr;parr < tarr+hs;parr++)
	{
		for(i = 0;i < L;i++)
		{
			sum += *(*parr + i);
		}
	}
	
	return (float)sum / (hs*L);

}

```



### 2、数组指针，求二维数组的四周元素的值

```c
数组指针，求二维数组的四周元素的值，【  (*arr)[N], arr[][N]  】
#include <stdio.h>

#define N 4
#define M 4
int input_arr2d(int (*tarr)[M],int hs);
int get_sum_of_round(int (*tarr)[M],int hs);
int main()
{
	int arr[N][M] = {{0}};
	int sum = 0;

	input_arr2d(arr,N);

	sum = get_sum_of_round(arr,N);

	printf("The sum is %d\n",sum);

	return 0;
}

//int input_arr2d(int tarr[][M],int hs)
int input_arr2d(int (*tarr)[M],int hs)
{
	int i = 0;
	int (*parr)[M] = NULL;

	printf("Please input %d * %d numbers:\n",hs,M);
	for(parr = tarr;parr < tarr + hs;parr++)
	{
		for(i = 0;i < M;i++)
		{
			scanf("%d",*parr + i);
		}
	}

	return 0;
}

//int get_sum_of_round(int tarr[][M],int hs)
int get_sum_of_round(int (*tarr)[M],int hs)
{
	int i = 0;
	int sum = 0;
	int (*parr)[M] = NULL;

	printf("Please input %d * %d numbers:\n",hs,M);
	for(parr = tarr;parr < tarr + hs;parr++)
	{
		for(i = 0;i < M;i++)
		{
			if(parr == tarr || parr == tarr + hs - 1 || i == 0 || i == M -1)
			{
				sum += *(*parr + i);
			}
		}
	}

	return sum;
}

```







## 函数指针



### 1、函数指针的使用-用户输入形状(多文件)

```c
函数指针的使用
.用户输入形状（1.长方形 2.椭圆 3.三角形），输入两个长度值，
求对应形状的面积后输出。多函数，并且决定调用哪个函数求面积的代码，
与调用代码分离）

--->头文件
#ifndef AREA_H
#define AREA_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>


#define PI 3.14



float get_area_of_rectangle(float l,float w);
float get_area_of_triangle(float w,float h);
float get_area_of_ellipse(float lr,float sr);



#endif
```

```c
--->main.c
#include "area.h"

int input_shape();
float input_length();

int main(int argc,char *argv[])
{
	int which = 0;
	float l1 = 0.0f;
	float l2 = 0.0f;
	float area = 0.0f;
	float (*pf)(float,float) = NULL;


	//A处：决定后续会用哪个函数去求面积
	which = input_shape();
	switch(which)
	{
		case 1://rectangle
			//pf = get_area_of_rectangle;
			pf = &get_area_of_rectangle;
			break;
		case 2://ellpise
			//pf = get_area_of_ellipse;
			pf = &get_area_of_ellipse;
			break;
		case 3://triangle
			//pf = get_area_of_triangle;
			pf = &get_area_of_triangle;
			break;
		default:
			break;
	}

	l1 = input_length();
	l2 = input_length();


	//B处：通过间接调用函数指针指向的函数去求面积
	if(pf != NULL)
	{
		//area = pf(l1,l2);
		area = (*pf)(l1,l2);
		printf("The area is %.2f\n",area);
	}
	else
	{
		printf("Can not get area\n");
	}


	return 0;
}

float input_length()
{
	float len = 0.0f;

	printf("Please input a length:\n");
	scanf("%f",&len);

	while(getchar() != '\n')
	{
	}
	return len;
}

int input_shape()
{
	int sh = 0;

	printf("Please input your select:\n");
	printf("1. Get Area of Rectangle\n");
	printf("2. Get Area of ellipse\n");
	printf("3. Get Area of Triangle\n");
	printf("0. Exit\n");
	scanf("%d",&sh);

	while(getchar() != '\n')
	{
	}

	return sh;
}

```

```c
--->功能函数
#include "area.h" 

float get_area_of_rectangle(float l,float w)
{
	return l * w;
}


float get_area_of_triangle(float w,float h)
{
	return w * h / 2;
}

float get_area_of_ellipse(float lr,float sr)
{
	return PI * lr * sr;
}

```



### 2、函数指针作为形参-通用排序(多文件)

```c
函数指针作为形参
实现三种排序方法对所有类型数据通用排序

#ifndef MY_SORT_H
#define MY_SORT_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int bubble_sort(void *pv,int cnt,int size,int (*pfcmp)(void *,void *));
int select_sort(void *pv,int cnt,int size,int (*pfcmp)(void *,void *));
int insert_sort(void *pv,int cnt,int size,int (*pfcmp)(void *,void *));


#endif
```

```c
#include "mysort.h"

/*
 * 需解决的问题即元素类型不一样带来的问题
 * 1. 元素的sizeof是变化---- 交换时临时空间怎么来
 * 2. 元素比较大小的方法不一样-----某类函数进行统一   int compare(void *,void *)
 * 3. 元素类型可变无法用赋值 ------ memcpy
 * 4. 如果计算指定下标元素所在空间的首地址
 * */
int bubble_sort(void *pv,int cnt,int size,int (*pfcmp)(void *,void *))
{
	int i = 0;
	int j = 0;
	void *pt =NULL;
	char *pstart = (char *)pv;

	//动态分配用于交换的临时空间
	pt = malloc(size);
	if(NULL == pt)
	{
		printf("Malloc failed in %s at %d\n",__FILE__,__LINE__);
		return -1;
	}

	for(i = 0;i < cnt;i++)
	{
		for(j = 0;j < cnt - i - 1;j++)
		{
			if(pfcmp(pstart + j * size,pstart + (j+1) * size) > 0 )
			{
				memcpy(pt,pstart + j * size,size);
				memcpy(pstart + j * size,pstart + (j+1) *size,size);
				memcpy(pstart + (j+1) *size,pt,size);
			}
		}
	}

	//释放用于交换的临时空间
	free(pt);
	pt = NULL;

	return 0;
}

int select_sort(void *pv,int cnt,int size,int (*pfcmp)(void *,void *))
{
	int i = 0;
	int j = 0;
	int min = 0;
	void *pt =NULL;
	char *pstart = (char *)pv;

	//动态分配用于交换的临时空间
	pt = malloc(size);
	if(NULL == pt)
	{
		printf("Malloc failed in %s at %d\n",__FILE__,__LINE__);
		return -1;
	}

	for(i = 0;i < cnt;i++)
	{
		min = i;

		for(j = i + 1;j < cnt;j++)
		{
			if(pfcmp(pstart + j * size,pstart + min *size) < 0)
			{
				min = j;
			}
		}

		if(min != i)
		{
			memcpy(pt,pstart + min * size,size);
			memcpy(pstart + min * size,pstart + i * size,size);
			memcpy(pstart + i * size,pt,size);
		}
	}
	
	//释放用于交换的临时空间
	free(pt);
	pt = NULL;
	return 0;
}

int insert_sort(void *pv,int cnt,int size,int (*pfcmp)(void *,void *))
{
	int i = 0;
	int j = 0;
	void *pt =NULL;
	char *pstart = (char *)pv;

	//动态分配用于交换的临时空间
	pt = malloc(size);
	if(NULL == pt)
	{
		printf("Malloc failed in %s at %d\n",__FILE__,__LINE__);
		return -1;
	}

	for(i = 1;i < cnt;i++)
	{
		memcpy(pt,pstart + i * size,size);
		for(j = i -1;j >= 0;j--)
		{
			if(pfcmp(pstart + j * size,pt) > 0)
			{
				memcpy(pstart + (j+1) * size,pstart + j * size,size);
			}
			else
			{
				break;
			}
		}
		memcpy(pstart + (j+1) * size,pt,size);
	}

	
	//释放用于交换的临时空间
	free(pt);
	pt = NULL;
	return 0;
}

```

```c
#include "mysort.h"

#define N1 5
#define N2 6

struct T
{
	int a;
	float b;
};

int intcmp(void *pv1,void *pv2);
int dblcmp(void *pv1,void *pv2);
int mystrcmp(void *pv1,void *pv2);
int stcmp(void *pv1,void *pv2);
int main(int argc,char *argv[])
{
	int intarr[N1] = {99,76,83,56,62};
	double dblarr[N1] = {99.9,76.6,83.3,56.6,62.2};
	char * strarr[N2] = {"Ruhua","Siyu","Cengyu","Luoyan","Biyue","Xiuhua"};
	struct T starr[N2] = {
				{1,55.5},
				{2,66.6},
				{3,33.3},
				{4,22.2},
				{5,88.8},
				{6,11.1},
			     };

	//bubble_sort(intarr,N1,sizeof(int),intcmp);
	//select_sort(intarr,N1,sizeof(int),intcmp);
	insert_sort(intarr,N1,sizeof(int),intcmp);
	printf("After sort intarr:\n");
	{
		int i = 0;
		for(i = 0;i < N1;i++)
		{
			printf("%d ",intarr[i]);
		}
		printf("\n");
	}
	
	//bubble_sort(dblarr,N1,sizeof(double),dblcmp);
	//select_sort(dblarr,N1,sizeof(double),dblcmp);
	insert_sort(dblarr,N1,sizeof(double),dblcmp);
	printf("After sort dblarr:\n");
	{
		int i = 0;
		for(i = 0;i < N1;i++)
		{
			printf("%.1f ",dblarr[i]);
		}
		printf("\n");
	}
	
	//bubble_sort(strarr,N2,sizeof(char *),mystrcmp);
	//select_sort(strarr,N2,sizeof(char *),mystrcmp);
	insert_sort(strarr,N2,sizeof(char *),mystrcmp);
	printf("After sort strarr:\n");
	{
		int i = 0;
		for(i = 0;i < N2;i++)
		{
			printf("%s\n",strarr[i]);
		}
	}
	
	//bubble_sort(starr,N2,sizeof(struct T),stcmp);
	//select_sort(starr,N2,sizeof(struct T),stcmp);
	insert_sort(starr,N2,sizeof(struct T),stcmp);
	printf("After sort starr:\n");
	{
		int i = 0;
		for(i = 0;i < N2;i++)
		{
			printf("a=%d,b=%.1f\n",starr[i].a,starr[i].b);
		}
	}
	return 0;
}

int stcmp(void *pv1,void *pv2)
{
	if(((struct T *)pv1)->b > ((struct T *)pv2)->b)
	{
		return -1;
	}
	else if(((struct T *)pv1)->b < ((struct T *)pv2)->b)
	{
		return 1;
	}
	else
	{
		return 0;
	}

}

int intcmp(void *pv1,void *pv2)
{
	return *(int *)pv1 - *(int *)pv2;
}

int dblcmp(void *pv1,void *pv2)
{
	if(*(double *)pv1 == *(double *)pv2)
	{
		return 0;
	}
	else if(*(double *)pv1 > *(double *)pv2)
	{
		return 1;
	}
	else
	{
		return -1;
	}
}

int mystrcmp(void *pv1,void *pv2)
{
	return strcmp(*(char **)pv1,*(char **)pv2);
}

```

### 3、【函数指针】设计一个结构体，其中包括成员

```c
【函数指针】设计一个结构体，其中包括成员：
1. char *cmd 指向空间存放着命令字符串
2. void (*pfdoing)(char *) 指向某一个函数，该函数完成命令字符串要求完成的功能
（此处用打印对应cmd字符串内容代替）程序定义6个函数 一个结构体数组，其大小为6，
用6个函数名初始化所有元素根据用户输入的字符串，调用相应函数
#include <stdio.h>
#include <string.h>

struct mycmd
{
	char *cmd;
	void (*pfdoing)(char *);
};

void f1(char *pstr);
void f2(char *pstr);
void f3(char *pstr);
void f4(char *pstr);
void f5(char *pstr);
void f6(char *pstr);
char *mygets(char *pout,int size);

int input_command(char *cmdstr,int cnt);
int run_command(struct mycmd *pcmdarr,int cnt,char *pstr);
#define N 6

int main(int argc,char *argv[])
{
	struct mycmd arr[N] = {
					{"Eat",f1},
					{"Sleep",f2},
					{"PlayGame",f3},
					{"LookBook",f4},
					{"Movie",f5},
					{"Study",f6}
			      };
	char bufcmd[20] = "";

	input_command(bufcmd,20);

	run_command(arr,N,bufcmd);
	return 0;
}

int run_command(struct mycmd *pcmdarr,int cnt,char *pstr)
{
	int ret = 0;
	struct mycmd *pst = NULL;

	for(pst = pcmdarr;pst < pcmdarr + cnt;pst++)
	{
		if(strcmp(pstr,pst->cmd) == 0)
		{
			pst->pfdoing(pst->cmd);
			break;
		}
	}

	if(pst == pcmdarr + cnt)
	{
		ret = -1;
		printf("The command is not supported\n");
	}
	
	return ret;
}


int input_command(char *cmdstr,int cnt)
{
	printf("Please input a command:\n");
	mygets(cmdstr,cnt);

	return 0;
}


void f1(char *pstr)
{
	printf("Call f1:%s\n",pstr);
}
void f2(char *pstr)
{
	printf("Call f2:%s\n",pstr);
}
void f3(char *pstr)
{
	printf("Call f3:%s\n",pstr);
}
void f4(char *pstr)
{
	printf("Call f4:%s\n",pstr);
}
void f5(char *pstr)
{
	printf("Call f5:%s\n",pstr);
}
void f6(char *pstr)
{
	printf("Call f6:%s\n",pstr);
}

```

### 4、【函数指针】有10个同类函数

```c
【函数指针】有10个同类函数（void f0（）  。。。。  void f9（）），这些函数体中完成打印对应函数编号，
定义一个数组保存这10个函数在代码区的首地址，
用户输入一个数字符号组成的字符串，程序解析该字符串中每个数字符号并调用对应函数
如：用户输入“3452”则依次调用f3、f4、f5、f2
#include <stdio.h>

void f0()
{
	printf("Call 0\n");
}
void f1()
{
	printf("Call 1\n");
}
void f2()
{
	printf("Call 2\n");
}
void f3()
{
	printf("Call 3\n");
}
void f4()
{
	printf("Call 4\n");
}
void f5()
{
	printf("Call 5\n");
}
void f6()
{
	printf("Call 6\n");
}
void f7()
{
	printf("Call 7\n");
}
void f8()
{
	printf("Call 8\n");
}
void f9()
{
	printf("Call 9\n");
}

typedef void (*PF)();

char *mygets(char *pout,int size);
int input_numstr(char *pstr,int cnt);
int parse_numstr(char *pstr);

int main(int argc,char *argv[])
{
	char buf[20] = "";

	input_numstr(buf,20);

	parse_numstr(buf);
	return 0;
}

int parse_numstr(char *pstr)
{
	PF arr[10] = {f0,f1,f2,f3,f4,f5,f6,f7,f8,f9};
	char *p = pstr;
	
	while(*p != '\0')
	{
		if(*p >= '0' && *p <= '9')
		{
			arr[*p -'0']();
		}
		p++;
	}

	return 0;
}

int input_numstr(char *pstr,int cnt)
{
	printf("Please input a numric-string:\n");
	mygets(pstr,cnt);

	return 0;
}

```

# 联合体（共用体）+枚举

## 一、枚举

```c
枚举（enum） 示例


#include <stdio.h>
/*
 * enum更加适用于给连续多个整型常量命名
enum week
{
	SUN,
	MON,
	TUE,
	WED,
	THU,
	FRI,
	SAT
};

//不建议使用宏定义
#define SUN 0
#define	MON 1
#define	TUE 2
#define	WED 3
#define	THU 4
#define	FRI 5
#define	SAT 6

*/



enum XYZ
{
	N1 = 2,
	N2,
	N3 = 10,
	N4,
};

#define X2 6

int main(int argc,char *argv[])
{
	int x = N4; 
	enum XYZ y = 100;
	int z = X2;

	printf("x=%d\n",x);

	x = N2;
	printf("x=%d\n",x);
	
	printf("y=%d\n",y);
	
	printf("z=%d\n",z);

	printf("sizeof enum XYZ = %lu\n",sizeof(enum XYZ));
	return 0;
}

```

## 联合体（共用体）

### 1、共用体union（联合体）

```c
共用体union（联合体）
测试输出,证明其共用同一块空间
#include <stdio.h>

union my_un
{
	unsigned short us;
	unsigned int  ui;
};


int main(int argc,char *argv[])
{
	union my_un u1 ={0x1234};

	printf("u1.us=%x\n",u1.us);
	printf("u1.ui=%x\n",u1.ui);

	u1.ui = 0x12345678;
	printf("u1.us=%x\n",u1.us);
	printf("u1.ui=%x\n",u1.ui);
	return 0;
}

```

### 2、共用体（联合体）union 示例--tpye：1->老师 2->学生

```c
共用体（联合体）union 示例
输入成员信息tpye：1->老师 2->学生，用union实现
#include <stdio.h>

#define NAME_LEN 20
#define LESSON_LEN 16

union data
{
	char lesson[LESSON_LEN];//for teacher
	float score;//for student
};

struct person
{
	char name[NAME_LEN];
	char sex;
	int no;
	int type;//1 teacher  2 student
	union data dt;
};

char *mygets(char *pout,int size);
int output_person(struct person *pt);
int input_person(struct person *pt);
int main(int argc,char *argv[])
{
	struct person t = {""};

	input_person(&t);
	output_person(&t);
	return 0;
}

int output_person(struct person *pt)
{
	switch(pt->type)
	{
		case 1://teacher info
			printf("This is a teacher:\n");
			printf("Name:%s\n",pt->name);
			printf("Sept->%c\n",pt->sex);
			printf("Work-No:%d\n",pt->no);
			printf("Lesson:%s\n",pt->dt.lesson);
			break;
		case 2://student info
			printf("This is a student:\n");
			printf("Name:%s\n",pt->name);
			printf("Sept->%c\n",pt->sex);
			printf("Study-No:%d\n",pt->no);
			printf("Score:%.1f\n",pt->dt.score);
			break;
		default:
			printf("The person type is invalid\n");
			break;
	}

	return 0;
}

int input_person(struct person *pt)
{
	printf("please input a name:\n");
	mygets(pt->name,NAME_LEN);

	printf("please input a sex\n");
	pt->sex= getchar();
	while(getchar() != '\n')
	{
	}

	printf("please input a no:\n");
	scanf("%d",&pt->no);
	while(getchar() != '\n')
	{
	}

	printf("Please select type:\n");
	printf("1. teacher\n");
	printf("2. student\n");
	scanf("%d",&pt->type);
	while(getchar() != '\n')
	{
	}

	if(pt->type == 1)
	{
		printf("Please input a lesson name:\n");
		mygets(pt->dt.lesson,LESSON_LEN);
	}
	else if(pt->type == 2)
	{
		printf("Please input a score:\n");
		scanf("%f",&pt->dt.score);
	}
	return 0;
}

```

### 3、-设计一个结构体同时表示老师和学生（含枚举，共用体）

头文件

```c
：设计一个结构体同时表示老师和学生，
       共同成员有姓名、性别（用枚举表示）、编号、类型（用枚举表示），
       不同成员：老师有所授科目名称 学生有功课成绩
       要求：
       1. 结构体元素的个数n通过main函数形参获得
       2. 用户输入n个人员信息
       3. 求出学生的均分后输出
       4. 打印出负责math科目的所有教师信息


#ifndef SCHOOL_H
#define SCHOOL_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define NAME_LEN 20
#define LESSON_LEN 16

enum SEX
{
	M = 'M',
	F = 'F',
};

enum PERSON_TYPE
{
	TEA = 1,
	STU,
};

union data
{
        char lesson[LESSON_LEN];//for teacher
        float score;//for student
};

struct person
{
        char name[NAME_LEN];
        char sex;
        int no;
        int type;//1 teacher  2 student
        union data dt;
};

char *mygets(char *pout,int size);
int output_math_teacherinfo(struct person *pt,int cnt);
float get_student_avescore(struct person *pt,int cnt);
int input_persons(struct person *pt,int cnt);

#endif

```

```c
--->main函数
#include "school.h"

int main(int argc,char *argv[])
{
	int cnt = 0;
	struct person *pt = NULL;

	if(argc < 2)
	{
		printf("The argument is too few,Usage:./sch 6\n");
		return 1;
	}

	sscanf(argv[1],"%d",&cnt);

	pt = (struct person *)malloc(cnt * sizeof(struct person));
	if(NULL == pt)
	{
		printf("Malloc failed\n");
		return 2;
	}
	memset(pt,0,cnt * sizeof(*pt));


	input_persons(pt,cnt);

	printf("The avescore of student is %.1f\n",get_student_avescore(pt,cnt));

	output_math_teacherinfo(pt,cnt);

	free(pt);
	pt = NULL;
	return 0;
}

```

```c
功能函数！
#include "school.h"


int output_math_teacherinfo(struct person *pt,int cnt)
{
	struct person *p = NULL;
	int num = 0;

	for(p = pt;p < pt + cnt;p++)
	{
		if(p->type == TEA)
		{
			if(strcmp(p->dt.lesson,"math") == 0)
			{
				num++;
				printf("This is a teacher:\n");
				printf("Name:%s\n",p->name);
				printf("Sept->%c\n",p->sex);
				printf("Work-No:%d\n",p->no);
				printf("Lesson:%s\n",p->dt.lesson);
			}
		}
	}
	if(num == 0)
	{
		printf("No math teacher info\n");
	}

	return 0;
}

float get_student_avescore(struct person *pt,int cnt)
{
	float total = 0;
	struct person *p = NULL;
	int num = 0;

	for(p = pt;p < pt + cnt;p++)
	{
		if(p->type == STU)
		{
			num++;
			total += p->dt.score;
		}
	}

	if(num != 0)
	{
		return total / num;
	}
	else
	{
		printf("No student data,get avescore failed\n");
		return -1.0;
	}
}

int input_one_person(struct person *pt);
int input_persons(struct person *pt,int cnt)
{
	struct person *p = NULL;

	for(p = pt;p < pt + cnt;p++)
	{
		input_one_person(p);
	}
	return 0;
}

int input_one_person(struct person *pt)
{
	printf("please input a name:\n");
	mygets(pt->name,NAME_LEN);

	printf("please input a sex\n");
	pt->sex= getchar();
	while(getchar() != '\n')
	{
	}

	printf("please input a no:\n");
	scanf("%d",&pt->no);
	while(getchar() != '\n')
	{
	}

	printf("Please select type:\n");
	printf("1. teacher\n");
	printf("2. student\n");
	scanf("%d",&pt->type);
	while(getchar() != '\n')
	{
	}

	if(pt->type == 1)
	{
		printf("Please input a lesson name:\n");
		mygets(pt->dt.lesson,LESSON_LEN);
	}
	else if(pt->type == 2)
	{
		printf("Please input a score:\n");
		scanf("%f",&pt->dt.score);
		while(getchar() != '\n')
		{
		}
	}
	return 0;
}

```

# 条件编译、宏定义

### 1、#/##的意义,示例

```c
宏定义，#/##的意义
#include <stdio.h>

#define NAME(a) #a
#define T(a) a##1

int main()
{
	int T(x);
	printf("%s\n",NAME(hello));
	x1 = 2;
	printf("x1=%d\n",x1);

	printf("some info in %s at %d\n",__FILE__,__LINE__);
	printf("some info in %s at %d\n",__FILE__,__LINE__);
	printf("some info in %s at %d\n",__FILE__,__LINE__);
	return 0;
}

```



### 2、条件编译示例-计算1-n的和，选择求和公式还是循环。

```c
条件编译示例
计算1-n的和，选择求和公式还是循环。
#include <stdio.h>

//#define USE_CIRCULATE

int main(int argc,char *argv[])
{
	int sum = 0;
	int n = 0;

	printf("Please input a number:\n");
	scanf("%d",&n);

	if(n <= 0)
	{
		printf("Your input is error\n");
		return 1;
	}

#if !defined USE_CIRCULATE
	printf("Not Use Circulate\n");
	sum = n * (1 + n) / 2;
#else

	{
		int i = 0;

		printf("Use Circulate\n");
		for(i = 1;i <= n;i++)
		{
			sum += i;
		}
	}
#endif
	printf("Sum is %d\n",sum);
	return 0;
}


```



# 元旦大作业，学生管理系统（综合）



```c
#ifndef STU_H
#define STU_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define NAME_LEN 20
struct stu
{
	int no;
	char name[NAME_LEN];
	char sex;
	float math;
	float english;
	float chinese;
};

struct myclass
{
	int cnt;
	int max;
	int lastno;
	struct stu *pt;
};

//#define PRINT_ERROR
#ifdef PRINT_ERROR
#define MyPrint printf("Error:in %s at %d-",__FILE__,__LINE__);printf
#else
#define MyPrint(...)  
#endif

/*stumodel.c*/
struct myclass * create_stuinfo_mem(int maxsize);
int destroy_stuinfo_mem(struct myclass *pcls);

int insert_student_at_tail(struct myclass *pcls,struct stu *pst);
int delete_student(struct myclass *pcls,int loc);
int modify_student(struct myclass *pcls,int loc,struct stu *pnew);
int search_student_by_no(struct myclass *pcls,int no);
int search_student_by_name(struct myclass *pcls,char *name);

int sort_total_by_insert(struct stu *pst,int cnt);
int sort_math_by_select(struct stu *pst,int cnt);
int sort_english_by_bubble(struct stu *pst,int cnt);
int sort_chinese_by_insert(struct stu *pst,int cnt);

/*mygets.c*/
char *mygets(char *pout,int size);


/*ui.c*/
int input_operation();
int print_all_student(struct myclass *pcls);
int input_a_new_stuinfo(struct stu *pst);
int print_user_info(char *pstr);

#endif

```

```c
#include "stu.h"

int mainloop(struct myclass *pcls);
int main(int argc,char *argv[])
{
	int max = 0;
	struct myclass *pcls = NULL;

	if(argc < 2)
	{
		printf("The argument is too few,Usage:./sims maxsize\n");
		return 1;
	}
	sscanf(argv[1],"%d",&max);

	if(max <= 0)
	{
		printf("The max argument is invalid\n");
		return 2;
	}

	pcls = create_stuinfo_mem(max);

	if(pcls != NULL)
	{		
		mainloop(pcls);
	}
	else
	{
		return 3; 
	}

	destroy_stuinfo_mem(pcls);
	pcls = NULL;
	return 0;
}

int mainloop(struct myclass *pcls)
{
	int exitflag = 0;
	int cmd = 0;
	struct stu t = {0};
	int ret = 0;

	while(1)
	{
		cmd = input_operation();
		switch(cmd)
		{
			case 1://add
				input_a_new_stuinfo(&t);
				ret = insert_student_at_tail(pcls,&t);	
				if(ret)
				{
					print_user_info("Insert a new student failed\n");
				}
				break;
			case 2://delete
				break;
			case 3://search
				break;
			case 4://modify
				break;
			case 5://sort by total-score
				sort_total_by_insert(pcls->pt,pcls->cnt);
				print_all_student(pcls);
				break;
			case 6://sort by math-score
				sort_math_by_select(pcls->pt,pcls->cnt);
				print_all_student(pcls);
				break;
			case 7://sort by english-score
				sort_english_by_bubble(pcls->pt,pcls->cnt);
				print_all_student(pcls);
				break;
			case 8://sort by chinese-score
				sort_chinese_by_insert(pcls->pt,pcls->cnt);
				print_all_student(pcls);
				break;
			case 0:
				exitflag = 1;
				break;
		}//end of switch
		if(exitflag)
		{
			break;
		}
	}//end of while(1)

	return 0;
}

```

```c
#include "stu.h"

struct myclass * create_stuinfo_mem(int maxsize)
{
	struct myclass *pcls = NULL;

	pcls = (struct myclass *)malloc(sizeof(struct myclass));
	if(NULL == pcls)
	{
		MyPrint("Malloc failed for myclass\n");
		return NULL;
	}
	memset(pcls,0,sizeof(struct myclass));

	pcls->max = maxsize;
	pcls->lastno = 1;
	pcls->pt = (struct stu *)malloc(maxsize * sizeof(struct stu));
	if(NULL == pcls->pt)
	{
		MyPrint("Malloc failed for student\n");
		free(pcls);
		pcls = NULL;
		return NULL;
	}
	memset(pcls->pt,0,maxsize * sizeof(struct stu));

	return pcls;
}

int destroy_stuinfo_mem(struct myclass *pcls)
{
	free(pcls->pt);
	pcls->pt = NULL;

	free(pcls);
	pcls = NULL;

	return 0;
}

int is_full(struct myclass *pcls)
{
	return pcls->cnt >= pcls->max ? 1 : 0;
}

int is_empty(struct myclass *pcls)
{
	return pcls->cnt <= 0 ? 1 : 0;
}

int insert_student_at_tail(struct myclass *pcls,struct stu *pst)
{
	if(is_full(pcls))
	{
		MyPrint("The stuinfo mem is already full\n");
		return -1;
	}

	memcpy(pcls->pt + pcls->cnt,pst,sizeof(struct stu));
	(pcls->pt+pcls->cnt)->no = pcls->lastno;
	pcls->lastno++;
	pcls->cnt++;

	return 0;
}

int delete_student(struct myclass *pcls,int loc)
{
	struct stu *ptemp = NULL;

	if(is_empty(pcls))
	{
		MyPrint("The stuinfo mem is already empty\n");
		return -1;
	}
	if(loc < 0 || loc >= pcls->cnt)
	{
		MyPrint("input param loc is invalid\n");
		return -1;
	}

	for(ptemp = pcls->pt + loc + 1;ptemp < pcls->pt + pcls->cnt;ptemp++)
	{
		memcpy(ptemp - 1,ptemp,sizeof(struct stu));
	}

	pcls->cnt--;
	
	return 0;
}

int modify_student(struct myclass *pcls,int loc,struct stu *pnew)
{
	if(loc < 0 || loc >= pcls->cnt)
	{
		MyPrint("input param loc is invalid\n");
		return -1;
	}

	memcpy(pcls->pt + loc,pnew,sizeof(struct stu));

	return 0;
}

int search_student_by_no(struct myclass *pcls,int no)
{
	int i = 0;

	for(i = 0;i < pcls->cnt;i++)
	{
		if((pcls->pt + i)->no == no)
		{
			break;
		}
	}

	if(i == pcls->cnt)
	{
		return -1;
	}
	else
	{
		return i;
	}
}

int search_student_by_name(struct myclass *pcls,char *name)
{
	struct stu *ptemp = NULL;

	for(ptemp = pcls->pt;ptemp < pcls->pt + pcls->cnt;ptemp++)
	{
		if(strcmp(ptemp->name,name) == 0)
		{
			break;
		}
	}
	if(ptemp == pcls->pt + pcls->cnt)
	{
		return -1;
	}
	else
	{
		return ptemp - pcls->pt;
	}
}

int sort_total_by_insert(struct stu *pst,int cnt)
{
	int i = 0;
	int j = 0;
	struct stu t = {0};

	for(i = 1;i < cnt;i++)
	{
		memcpy(&t,pst+i,sizeof(struct stu));
		for(j = i-1;j >= 0;j--)
		{
			if( ((pst + j)->math + 
			     (pst + j)->english +
			     (pst + j)->chinese) < 
			    (t.math + t.english + t.chinese)
			  )
			{
				memcpy(pst + j + 1,pst+j,sizeof(struct stu));
			}
			else
			{
				break;
			}
		}
		memcpy(pst + j + 1,&t,sizeof(struct stu));
	}

	return 0;
}

int sort_math_by_select(struct stu *pst,int cnt)
{
	return 0;
}

int sort_english_by_bubble(struct stu *pst,int cnt)
{
	return 0;
}

int sort_chinese_by_insert(struct stu *pst,int cnt)
{
	int i = 0;
	int j = 0;
	struct stu t = {0};

	for(i = 1;i < cnt;i++)
	{
		memcpy(&t,pst+i,sizeof(struct stu));
		for(j = i-1;j >= 0;j--)
		{
			if( (pst + j)->chinese < t.chinese)
			{
				memcpy(pst + j + 1,pst+j,sizeof(struct stu));
			}
			else
			{
				break;
			}
		}
		memcpy(pst + j + 1,&t,sizeof(struct stu));
	}

	return 0;
}

```

```c
#include "stu.h"

int input_operation()
{
	int op = 0;

	printf("##########################################\n");
	printf("1. Add a new student\n");
	printf("2. delete a student\n");
	printf("3. search a student\n");
	printf("4. modify a student-info\n");
	printf("5. sort all students by total-score\n");
	printf("6. sort all students by math-score\n");
	printf("7. sort all students by english-score\n");
	printf("8. sort all students by chinese-score\n");
	printf("0. Exit\n");
	printf("##########################################\n");

	scanf("%d",&op);

	while(getchar() != '\n')
	{
	}
	return op;
}

int print_all_student(struct myclass *pcls)
{
	struct stu *ptemp = NULL;

	printf("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");
	printf("No  Name                    Sex Math    English Chinese Total\n");
	for(ptemp = pcls->pt;ptemp < pcls->pt + pcls->cnt;ptemp++)
	{
		printf("%-4d%-24s%-4c%-8.1f%-8.1f%-8.1f%-8.1f\n",
				ptemp->no,
				ptemp->name,
				ptemp->sex,
				ptemp->math,
				ptemp->english,
				ptemp->chinese,
				ptemp->math + ptemp->english + ptemp->chinese
		      );

	}
	printf("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n");

	return 0;
}

int input_a_new_stuinfo(struct stu *pst)
{
	printf("Please input new student name:\n");
	mygets(pst->name,NAME_LEN);

	printf("Please input new student sex:\n");
	pst->sex = getchar();
	while(getchar() != '\n')
	{
	}

	printf("Please input new student max-score:\n");
	scanf("%f",&pst->math);
	while(getchar() != '\n')
	{
	}

	printf("Please input new student english-score:\n");
	scanf("%f",&pst->english);
	while(getchar() != '\n')
	{
	}

	printf("Please input new student chinese-score:\n");
	scanf("%f",&pst->chinese);
	while(getchar() != '\n')
	{
	}

	return 0;
}

int print_user_info(char *pstr)
{
	return printf("%s",pstr);
}

```

```c
#include <stdio.h>
#include <string.h>

char *mygets(char *pout,int size)
{
	char *p = NULL;

	fgets(pout,size,stdin);

	p = pout + strlen(pout) - 1;

	if(*p == '\n')
	{
		*p = '\0';
	}
	else
	{
		while(getchar() != '\n')
		{
		}
	}

	return pout;
}

```

