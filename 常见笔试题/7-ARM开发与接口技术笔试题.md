# ARM开发与接口技术笔试题

1. FIQ比IRQ快的原因：

   FIQ模式的R8--R14寄存器是独有的，FIQ处理程序可以不必执行保存和恢复中断现场的指令。

   FIQ可以将ISR直接放在FIQ后面的地址空间，不需要跳转。

2. 中断与异常有何区别

    异常在处理的时候必须考虑与处理器的时钟同步，实际上异常也称为同步中断，在处理器执行到因编译错误而导致的错误指令时，或者在执行期间出现特殊错误，必须靠内核处理的时候，处理器就会产生一个异常；所谓中断是指外部硬件产生的一个电信号从CPU的中断引脚进入，打断CPU的运行。所谓异常是指软件运行过程中发生了一些必须作出处理的事件，CPU自动产生一个陷入来打断CPU的运行。

3. 在ARM系统中，在函数调用的时候，参数是通过哪种方式传递的

   当参数小于等于4的时候是通过r0-r3寄存器来进行传递的，当参数大于4的时候是通过压栈的方式进行传递。

4. 简述SPI,UART,I2C三种传输方式

   SPI：高速同步串行口，首发独立，可同步进行

   SPI接口主要应用在EEPROM，Flash，实时时钟，A/D转化器，数字信号处理，是一种全双工同步通讯总线，该接口一般使用四条线：串行时钟线（sck），主出从入线，主入从出线，低电平有效地的从机选择线。

   I2C协议：是单片机与其他芯片进行通讯的协议：

   ​	只要求两条总线线路，一条是串行时钟线，一条是串行数据线； 

   ​	通过软件设定地址 

   ​	是一个多主机总线，如果两个或更多主机同时初始化数据传送可通过冲突检测和仲裁防止数据破坏； 

   ​	I2C总线传输的是数据的总高位

   ​	UART：主要是由一个modem（调制解调器），可以将模拟信号量转化成数字信号量。

   

5. 嵌入式系统中断服务子程序(ISR)

   中断是嵌入式系统中重要的组成部分，导致了很多编译开发商提供一种扩展—让标准C支持中断。具体代表是，产生了一个新的关键字 __ interrupt。下面的代码就使用了__interrupt关键字去定义了一个中断服务子程序(ISR)，请评论一下这段代码的。

   ```c
   __interrupt double compute_area (double radius)
   {
     double area = PI * radius * radius;
     printf("Area = %f", area);
     return area;
   }
   ```

     A.ISR 不能返回一个值。

     B.ISR 不能传递参数。

     C.在许多的处理器/编译器中，浮点一般都是不可重入的。有些处理器/编译器需要让额处的寄存器入栈，有些处理器/编译器就是不允许在ISR中做浮点运算。此外，ISR应该是短而有效率的，在ISR中做浮点运算是不明智的。

     D.printf()经常有重入和性能上的问题。



8. 当一个异常出现以后，ARM微处理器会执行哪几步操作？

     答：当一个异常出现以后，ARM微处理器会执行以下几步操作。

     A、将下一条指令的地址存入相应连接寄存器LR，以便程序在处理异常返回时能从正确的位置重新开始执行。若异常是从ARM状态进入，则LR寄存器中保存 的是下一条指令的地址（当前PC＋4或PC＋8，与异常的类型有关）；若异常是从Thumb状态进入，则在LR寄存器中保存当前PC的偏移量，这样，异常 处理程序就不需要确定异常是从何种状态进入的。例如：在软件中断异常SWI，指令 MOV PC，R14_svc总是返回到下一条指令，不管SWI是在ARM状态执行，还是在Thumb状态执行。

     B、将CPSR复制到相应的SPSR中。

     C、根据异常类型，强制设置CPSR的运行模式位。

     D、强制PC从相关的异常向量地址取下一条指令执行，从而跳转到相应的异常处理程序处。



9. ARM微处理器在较新的体系结构中支持两种指令集：______、______。

     答案：ARM指令集、Thumb指令集



12. 表示递增和递减的满堆栈和空堆栈有哪几种组合，请比较它们的特点。

      答：有4种类型的堆栈，表示递增和递减的满堆栈和空堆栈的各种组合。

      满递增：堆栈通过增大存储器的地址向上增长，堆栈指针指向内含有效数据项的最高地址。指令如LDMFA，STMFA等。

      空递增：堆栈通过增大存储器的地址向上增长，堆栈指针指向堆栈上的第一个空地址。指令如LDMEA，STMEA等。

      满递减：堆栈通过减小存储器的地址向下增长，堆栈指针指向内含有效数据项的最低地址。指令如LDMFD，STMFD等。

      空递减：堆栈通过减小存储器的地址向下增长，堆栈指针指向堆栈下的第一个空地址。指令如LDMED，STMED等。



13. ARM协处理器指令包括哪3类，请描述它们的功能。

      答：ARM协处理器指令包括以下3类：

      用于ARM处理器初始化ARM协处理器的数据处理操作。

      用于ARM处理器的寄存器和ARM协处理器的寄存器间的数据传送操作。

      用于在ARM协处理器的寄存器和内存单元之间传送数据。



14. 可执行映像文件通常由几部分构成，它们有什么特点？

      答：可执行映像文件通常由以下几部分构成。

      一个或多个代码段，代码段的属性为只读。

      零个或多个包含初始化数据的数据段，数据段的属性为可读写。

      零个或多个不包含初始化数据的数据段，数据段的属性为可读写。



16. 总线通常包括______、______和______。

      答案：数据总线、地址总线、控制总线



17. 复位后，ARM处理器处于（B）模式，（D）状态

    A. user 	B . SVC 	C. system 	D. ARM 	E. Thumb



18. ARM处理器中优先级别最高的异常为（E）

      A. FIQ   	B. SWI   	C. IRQ   	D. SVC   	E. RESET

    

    

21. ATPCS规定中，栈是（B）

      A. 满加  	B. 满减  	C. 空加  	D. 空减

22. ARM汇编编程中，通常PC是指（D），LR是指（C），SP是指（B）

      A. R12  	B. R13  	C. R14  	D. R15

23. CPU复位后执行MOV R0，PC指令后，R0寄存器的值为（C）

      A. 0x0  	B. 0x4  	C. 0x8  	D. 0xC

24. ARM中可以访问状态寄存器的指令是（D），能够访问内存的指令是（B）

      A. MOV  	B. LDR 	 C. MCR  	D. MRS

25. ARM7TDMI使用3级流水线，分3个阶段，分别为

​		取指、译码和 执行



26. ARM9的五级流水线

​	分别是取指、译码、执行、缓冲数据、回写



27. ARM的异常类型有

​	复位异常、未定义指令异常、软件中断、指令预取中止、数据中止异常、IRQ、FIQ



28. 描述一下嵌入式基于ROM的运行方式基于RAM的运行方式有什么区别。

      基于RAM的运行方式：需要把硬盘和其他介质的代码先加载到ram中，加载过程中一般有重定位的操作；

      基于ROM：没有上面的操作。

      基于ROM：速度较基于RAM的慢，因为会有一个把变量，部分代码等从存储器（硬盘，flash）搬移到RAM的过程；可用RAM资源比基于RAM的多；

      基于RAM：速度较基于ROM的快，可用RAM比基于ROM的少，因为所有的代码，数据都必须存放在RAM中。

 

29. 嵌入式操作系统和通用操作系统有什么差别？

      答案：多优先级，抢占型，实时操作系统。嵌入式操作系统一般没有UI，体积小，实时性强，对稳定性要求更高。嵌入式操作系统强调实时性，并且可裁减。要求系统资源的消耗要尽可能的小。

 

30. 在ARM体系结构中，要从主动用户模式（User）切换到超级用户模式（Supervisor），应采用何种方法？C
      A、直接修改CPU状态寄存器（CPSR）对应的模式
      B、先修改程序状态备份寄存器（SPSR）到对应的模式，再更新CPU状态
      C、使用软件中断指令（SWI）
      D、让处理器执行未定义指令

 

31. 在ARM Linux体系中，用来处理外设中断的异常模式是     C
      A、软件中断（SWI）        B、未定义的指令异常
      C、中断请求（IRQ）        D、快速中断请求（FIQ）

 

32. 在ARM Linux系统中，中断处理程序进入C代码以后，ARM的处于  A  工作模式
      A、超级用户（SVC）        B、中断(IRQ)
      C、快速中断（IRQ）        D、和进入中断之前的状态有关系

 

33. 在ARM体系构建的嵌入式系统中，由电平模式触发的中断，其对应的中断标准应该在何时被清除？A
      A、当中断处理程序结束以后，才可以清除
      B、进入相应的中断处理程序，即可以清除
      C、产生IRQ中断的时候，处理器自动清除
      D、任何时候都可以清除

 

34. 在下列ARM处理器的各种模式中，只有__ A ___模式不可以自由地改变处理器的工作模式。
      A、用户模式（User）  B、系统模式(System)
      C、终止模式(Abort)     D、中断模式(IRQ)

 

35. ARM嵌入式系统中，PC指向的是正在（C ）的指令地址。                 
      A 执行     B 译码    C 取指     D 都不是

 

36. 同CISC相比，下面哪一项不属于RISC处理器的特征__  D__ 
      A、采用固定长度的指令格式，指令规整、简单、基本寻址方式有2～3种。
      B、减少指令数和寻址方式，使控制部件简化，加快执行速度。
      C、数据处理指令只对寄存器进行操作，只有加载/存储指令可以访问存储器，以提高指令的执行效率，同时简化处理器的设计。
      D、RISC处理器都采用哈佛结构

 

37. 在ARM体系结构中，要从主动用户模式（User）切换到超级用户模式（Supervisor），应采用何种方法？C
      A、直接修改CPU状态寄存器（CPSR）对应的模式
      B、先修改程序状态备份寄存器（SPSR）到对应的模式，再更新CPU状态
      C、使用软件中断指令（SWI）
      D、让处理器执行未定义指令

 

38. 在ARM系统结构中，MMU映射最小的单元空间是   __ D __
      A、64KB     B、16KB     C、4KB     D、1KB

 

39. 在ARM Linux启动的过程中，开启MMU的时候，如何实现从实地址空间到虚拟地址空间的过度？D
      A、开启MMU，在内存中创建页表（映射内核到3G以上的虚拟地址空间）并继续运行。
      B、开启MMU，在内存中创建页表（映射内核到3G以上的虚拟地址空间），跳转到虚拟地址空间继续运行。
      C、在内存中创建页表（映射内核到3G以上的虚拟地址空间），开启MMU，跳转到虚拟地址空间继续运行。
      D、在内存中创建页表（映射内核到3G以上的虚拟地址空间，同时把内核所在的前1MB空间到和其实地址相同的虚拟地址空间），开启MMU，跳转到虚拟地址空间继续运行。

 

40. 在ARM Linux体系中，用来处理外设中断的异常模式是_  C  _
      A、软件中断（SWI）        B、未定义的指令异常
      C、中断请求（IRQ）        D、快速中断请求（FIQ）

 

42. 哈佛结构和冯诺依曼结构的区别是( A)
      A 指令和数据分开存储  B 不需要程序计数器  C 统一编址  D 单一数据总线 



46. 同CISC相比，下面哪一项不属于RISC处理器的特征   D
      A、采用固定长度的指令格式，指令规整、简单、基本寻址方式有2～3种。
      B、减少指令数和寻址方式，使控制部件简化，加快执行速度。
      C、数据处理指令只对寄存器进行操作，只有加载/存储指令可以访问存储器，以提高指令的执行效率，同时简化处理器的设计。
      D、RISC处理器都采用哈佛结构

 

47. 中断向量是指（  C　）
      A、中断断点的地址                 B、中断向量表起始地址 
      C、中断处理程序入口地址      D、中断返回地址　

 

48. 在ARM系统结构中，MMU映射最大的单元空间是   A
      A、1MB     B、128KB    C、64KB     D、4KB